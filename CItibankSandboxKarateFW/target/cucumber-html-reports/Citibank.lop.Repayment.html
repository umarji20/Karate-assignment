<!DOCTYPE html>
<html lang="en">
  
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
<meta charset="utf-8">
    
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    
<link href="res/bootstrap.min.css" rel="stylesheet" type="text/css">
    
<link href="res/karate-report.css" rel="stylesheet" type="text/css">
    
<link href="favicon.ico" rel="shortcut icon">
    
<script src="res/jquery.min.js" type="text/javascript"></script>
    <script src="res/jquery.tablesorter.min.js" type="text/javascript"></script>
    <script src="res/bootstrap.min.js" type="text/javascript"></script>
    <script src="res/karate-report.js" type="text/javascript"></script>
    
<title>Citibank.lop.Repayment</title>
  
</head>
  
<body>
    
<div id="root-container">
      
<div id="leftnav">
        
<div class="nav-logo">
          
<a href="karate-summary.html">
            <img alt="Karate" src="res/karate-logo.svg">
          </a>
          
<div class="nav-count">
            
<div class="bg-success" id="nav-pass">1</div>
            
<div class="bg-danger" id="nav-fail">0</div>
          
</div>
        
</div>
        
<div id="nav-type">Scenarios</div>         
        
<div id="nav-date">2020-07-31 06:33:21 PM</div>        
      
<div class="nav-container">
<div class="nav-item passed">
<a href="#[1:7]">[1:7] Upcomming next Payment details </a>
</div>
</div>
</div>
      
<div id="content">
      
<div class="page-heading alert alert-primary">
<a href="karate-summary.html">Summary</a><span class="feature-label">|</span><a href="karate-tags.html">Tags</a><span class="feature-label">|</span><span class="feature-label">Feature:</span><span class="feature-name">Citibank/lop/Repayment.feature</span><span class="feature-description">Repayment</span>
</div>
<div class="scenario">
<div class="scenario-heading" id="[1:7]">
<div class="heading-container">
<div class="scenario-tags">
<a class="badge badge-primary" href="karate-tags.html">NextRepayment</a>
</div>
<span class="scenario-keyword">Scenario: [1:7]</span><span class="scenario-name">Upcomming next Payment details </span>
</div>
<div class="scenario-time passed">ms: 24307</div>
</div>
<div class="step-row">
<div class="step-container" id="[1:7]bg">
<div class="step-ref bg-step">&gt;&gt;</div>
<div class="step-cell passed">Background:</div>
</div>
<div class="time-cell passed"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="1">
<div class="step-ref bg-step">1</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">574</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="1.1">
<div class="step-ref bg-step">&gt;&gt;</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">542</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="2">
<div class="step-ref bg-step">2</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">16</div>
</div>
<div class="preformatted" data-parent="2">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="3">
<div class="step-ref bg-step">3</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">26</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="4">
<div class="step-ref bg-step">4</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="4">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="5">
<div class="step-ref bg-step">5</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">20</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="6">
<div class="step-ref bg-step">6</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="preformatted" data-parent="6">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="7">
<div class="step-ref bg-step">7</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">396</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="8">
<div class="step-ref bg-step">8</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="preformatted" data-parent="8">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="9">
<div class="step-ref bg-step">9</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">40</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="10">
<div class="step-ref bg-step">10</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="10">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="11">
<div class="step-ref bg-step">11</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="12">
<div class="step-ref bg-step">12</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="12">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="13">
<div class="step-ref bg-step">13</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="13">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="14">
<div class="step-ref bg-step">14</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="preformatted" data-parent="14">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container">
<div class="step-ref bg-step"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="15">
<div class="step-ref bg-step">15</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="preformatted" data-parent="15">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row" data-parent="[1:7]bg">
<div class="step-container" id="16">
<div class="step-ref bg-step">16</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="16">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="17">
<div class="step-ref passed">17</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell passed">2255</div>
</div>
<div class="step-row">
<div class="step-container" id="17.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/CardAuthorization.feature</div>
</div>
<div class="time-cell passed">2241</div>
</div>
<div class="step-row">
<div class="step-container" id="18">
<div class="step-ref passed">18</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">29</div>
</div>
<div class="step-row">
<div class="step-container" id="18.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="19">
<div class="step-ref passed">19</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="19">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="20">
<div class="step-ref passed">20</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="21">
<div class="step-ref passed">21</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="21">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="22">
<div class="step-ref passed">22</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="23">
<div class="step-ref passed">23</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="23">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="24">
<div class="step-ref passed">24</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="25">
<div class="step-ref passed">25</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="25">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="26">
<div class="step-ref passed">26</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="27">
<div class="step-ref passed">27</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="27">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="28">
<div class="step-ref passed">28</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="29">
<div class="step-ref passed">29</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="29">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="30">
<div class="step-ref passed">30</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="30">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="31">
<div class="step-ref passed">31</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="31">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="32">
<div class="step-ref passed">32</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="32">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="33">
<div class="step-ref passed">33</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="33">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="34">
<div class="step-ref passed">34</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def CardAuthRequest = read('classpath:Citibank/lop/CardAuthorizationRequest.json')</div>
</div>
<div class="time-cell passed">7</div>
</div>
<div class="step-row">
<div class="step-container" id="35">
<div class="step-ref passed">35</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="36">
<div class="step-ref passed">36</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="37">
<div class="step-ref passed">37</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="38">
<div class="step-ref passed">38</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="39">
<div class="step-ref passed">39</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container" id="40">
<div class="step-ref passed">40</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="41">
<div class="step-ref passed">41</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request CardAuthRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="42">
<div class="step-ref passed">42</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">2163</div>
</div>
<div class="preformatted" data-parent="42">18:32:58.446 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 157
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 039504---513921-2363
{"grant_type":"card_authorization","lastFourDigitsCardNumber":"8653","citiCardHolderPhoneNumber":"6590020056","merchantCustomerReferenceId":"CB072000128065"}

18:32:59.749 response time in milliseconds: 1299.24
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: ,Content-Type,sid,CCPToken,CFIToken,countryCode,businessCode,channelId,uuid,client_id,environmentId
1 &lt; Access-Control-Allow-Methods: GET,PUT,POST,DELETE,HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID,sid,SessionId,CCPToken,CFIToken
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 991fbbf5-e8c2-4c52-bddd-f0fd21d68699
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Length: 210
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:00 GMT
1 &lt; Expires: -1
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:00 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 039504---513921-2363
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 2b7692085f241683b3cc738d
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,59;
1 &lt; X-Vcap-Request-Id: 214e91dc-291b-4a3d-6861-db07a33b8753
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"58186008660711316726110805632426","status":"generated","mfaResponse":{"otpDeliveryOption":["SMS"]}}}</div>
<div class="step-row">
<div class="step-container" id="43">
<div class="step-ref passed">43</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="44">
<div class="step-ref passed">44</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="44">18:32:59.752 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "58186008660711316726110805632426",
    "mfaType": "otp",
    "mfaResponse": {
      "otpDeliveryOption": [
        "SMS"
      ]
    },
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="45">
<div class="step-ref passed">45</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def ControlflowId1 = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">8</div>
</div>
<div class="step-row">
<div class="step-container" id="46">
<div class="step-ref passed">46</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match ControlflowId1 == '#present'</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="47">
<div class="step-ref passed">47</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="47">18:32:59.766 [print] 58186008660711316726110805632426</div>
<div class="step-row">
<div class="step-container" id="48">
<div class="step-ref passed">48</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********ControlFlowIdGenerated*********'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="48">18:32:59.770 [print] *********ControlFlowIdGenerated*********</div>
<div class="step-row">
<div class="step-container" id="49">
<div class="step-ref passed">49</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell passed">2788</div>
</div>
<div class="step-row">
<div class="step-container" id="49.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/CardAuthorizationAccessToken.feature</div>
</div>
<div class="time-cell passed">2769</div>
</div>
<div class="step-row">
<div class="step-container" id="50">
<div class="step-ref passed">50</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">25</div>
</div>
<div class="step-row">
<div class="step-container" id="50.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">13</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="51">
<div class="step-ref passed">51</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="51">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="52">
<div class="step-ref passed">52</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="53">
<div class="step-ref passed">53</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="53">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="54">
<div class="step-ref passed">54</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="55">
<div class="step-ref passed">55</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="55">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="56">
<div class="step-ref passed">56</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="57">
<div class="step-ref passed">57</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="57">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="58">
<div class="step-ref passed">58</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="59">
<div class="step-ref passed">59</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="59">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="60">
<div class="step-ref passed">60</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="61">
<div class="step-ref passed">61</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="61">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="62">
<div class="step-ref passed">62</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="62">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="63">
<div class="step-ref passed">63</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="63">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="64">
<div class="step-ref passed">64</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="64">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="65">
<div class="step-ref passed">65</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="65">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="66">
<div class="step-ref passed">66</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell passed">945</div>
</div>
<div class="step-row">
<div class="step-container" id="66.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/CardAuthorization.feature</div>
</div>
<div class="time-cell passed">935</div>
</div>
<div class="step-row">
<div class="step-container" id="67">
<div class="step-ref passed">67</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">37</div>
</div>
<div class="step-row">
<div class="step-container" id="67.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="68">
<div class="step-ref passed">68</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="68">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="69">
<div class="step-ref passed">69</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="70">
<div class="step-ref passed">70</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="70">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="71">
<div class="step-ref passed">71</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="72">
<div class="step-ref passed">72</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="72">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="73">
<div class="step-ref passed">73</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="74">
<div class="step-ref passed">74</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="74">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="75">
<div class="step-ref passed">75</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="76">
<div class="step-ref passed">76</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="76">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="77">
<div class="step-ref passed">77</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="78">
<div class="step-ref passed">78</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="78">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="79">
<div class="step-ref passed">79</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="79">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="80">
<div class="step-ref passed">80</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="80">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="81">
<div class="step-ref passed">81</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="81">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="82">
<div class="step-ref passed">82</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="82">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="83">
<div class="step-ref passed">83</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def CardAuthRequest = read('classpath:Citibank/lop/CardAuthorizationRequest.json')</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="84">
<div class="step-ref passed">84</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="85">
<div class="step-ref passed">85</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="86">
<div class="step-ref passed">86</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="87">
<div class="step-ref passed">87</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="88">
<div class="step-ref passed">88</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="89">
<div class="step-ref passed">89</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="90">
<div class="step-ref passed">90</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request CardAuthRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="91">
<div class="step-ref passed">91</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">892</div>
</div>
<div class="preformatted" data-parent="91">18:32:59.864 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 157
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 4-44954-0405265117-6
{"grant_type":"card_authorization","lastFourDigitsCardNumber":"8653","citiCardHolderPhoneNumber":"6590020056","merchantCustomerReferenceId":"CB072000128065"}

18:33:00.753 response time in milliseconds: 886.56
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: ,Content-Type,sid,CCPToken,CFIToken,countryCode,businessCode,channelId,uuid,client_id,environmentId
1 &lt; Access-Control-Allow-Methods: GET,PUT,POST,DELETE,HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID,sid,SessionId,CCPToken,CFIToken
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 365cdaec-aa70-4a67-82d8-49d10323bee3
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Length: 210
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:01 GMT
1 &lt; Expires: -1
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:01 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 4-44954-0405265117-6
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 6e68aa425f241684dcce661f
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,59;
1 &lt; X-Vcap-Request-Id: 21cfcabd-4ba3-486c-575d-a310e4ccc5e3
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"27023492170866194426799615834875","status":"generated","mfaResponse":{"otpDeliveryOption":["SMS"]}}}</div>
<div class="step-row">
<div class="step-container" id="92">
<div class="step-ref passed">92</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="93">
<div class="step-ref passed">93</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="93">18:33:00.754 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "27023492170866194426799615834875",
    "mfaType": "otp",
    "mfaResponse": {
      "otpDeliveryOption": [
        "SMS"
      ]
    },
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="94">
<div class="step-ref passed">94</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def ControlflowId1 = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="95">
<div class="step-ref passed">95</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match ControlflowId1 == '#present'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="96">
<div class="step-ref passed">96</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="96">18:33:00.756 [print] 27023492170866194426799615834875</div>
<div class="step-row">
<div class="step-container" id="97">
<div class="step-ref passed">97</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********ControlFlowIdGenerated*********'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="97">18:33:00.756 [print] *********ControlFlowIdGenerated*********</div>
<div class="step-row">
<div class="step-container" id="98">
<div class="step-ref passed">98</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/token/sg/gcb'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="99">
<div class="step-ref passed">99</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="100">
<div class="step-ref passed">100</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/x-www-form-urlencoded'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="101">
<div class="step-ref passed">101</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="102">
<div class="step-ref passed">102</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="103">
<div class="step-ref passed">103</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="104">
<div class="step-ref passed">104</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field grant_type = 'card_authorization'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="105">
<div class="step-ref passed">105</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field controlFlowId = ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="106">
<div class="step-ref passed">106</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field linkageConfirmationCode = '987654'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="107">
<div class="step-ref passed">107</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field scope = 'lop_booking'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="108">
<div class="step-ref passed">108</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">1770</div>
</div>
<div class="preformatted" data-parent="108">18:33:00.774 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/token/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 125
1 &gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 352-0623289938910597
grant_type=card_authorization&amp;controlFlowId=27023492170866194426799615834875&amp;linkageConfirmationCode=987654&amp;scope=lop_booking

18:33:02.540 response time in milliseconds: 1762.97
1 &lt; 200
1 &lt; Accept: application/json
1 &lt; Access-Control-Allow-Methods: POST
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID
1 &lt; Akamai-Origin-Hop: 1
1 &lt; Cache-Control: no-cache, max-age=0
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Cookie: CITI_SITE=gtdc
1 &lt; Date: Fri, 31 Jul 2020 13:03:03 GMT
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:03 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Akamai-CONFIG-LOG-DETAIL: true
1 &lt; X-Akamai-True-Client-IP: 49.207.197.157
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-DataStream-Session-Id: 22f17934-5f241685-149022f8
1 &lt; X-Forwarded-For: 49.207.197.157
1 &lt; X-Global-Transaction-ID: 98b6a3705f241686ea7fc97f
1 &lt; X_AK_SHAPE_AGGREGATOR_IP: FALSE
1 &lt; cardIdHeader: 44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d
1 &lt; cardReferenceNumberHeader: 37344b5144564669667
1 &lt; citiUUID: 
1 &lt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; client_secret: Y8yP3bN7gS3lQ0aC3wE0qY3oC4gU0kK0sI1uI5hF6wF6qL4kA3
1 &lt; customerIdHeader: 6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d
1 &lt; dmz-global-txn-id: 98b6a3705f241686ea7fc97f
1 &lt; mfaCode: Lwm%2FctKxb2EC01wY1CyKGn0Xa51E2GLi47dRIppFBw8Oi76OJVU5Ryw0YrO5bzZyZyWOHcM6ictzh3GbB0VYeg%3D%3D
1 &lt; uuid: 352-0623289938910597
{"token_type":"Bearer","access_token":"AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g","expires_in":2678400,"consented_on":1596200582,"scope":"lop_booking","refresh_token":"AALHOuHMKPKhdmPNLOGaYGMF7TGJCQ2L9w4xh6BR6u7tQegRpoMoB_tHABGR5JQRS5r_YzU15fJ4-LtAwZ4zpo93a34zhvbBC0QTbF07uuhaO0Iit9Y5ve-qD6jdXAD5q9FGqEWlX1GIg_PbfrYziVHf3hmftA7udRIyPDAxXKWpXcPH0vnTzECV-GB6wDTtSlA8e72z--cYMCd98dqojKl81ksEf23CFbUXuMe_fSyihA","refresh_token_expires_in":2682000,"cardId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","customerId":"6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d","cardReferenceNumber":"37344b5144564669667"}</div>
<div class="step-row">
<div class="step-container" id="109">
<div class="step-ref passed">109</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="110">
<div class="step-ref passed">110</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="110">18:33:02.541 [print] {
  "access_token": "AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g",
  "refresh_token_expires_in": 2682000,
  "refresh_token": "AALHOuHMKPKhdmPNLOGaYGMF7TGJCQ2L9w4xh6BR6u7tQegRpoMoB_tHABGR5JQRS5r_YzU15fJ4-LtAwZ4zpo93a34zhvbBC0QTbF07uuhaO0Iit9Y5ve-qD6jdXAD5q9FGqEWlX1GIg_PbfrYziVHf3hmftA7udRIyPDAxXKWpXcPH0vnTzECV-GB6wDTtSlA8e72z--cYMCd98dqojKl81ksEf23CFbUXuMe_fSyihA",
  "scope": "lop_booking",
  "cardId": "44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d",
  "consented_on": 1596200582,
  "customerId": "6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d",
  "cardReferenceNumber": "37344b5144564669667",
  "token_type": "Bearer",
  "expires_in": 2678400
}</div>
<div class="step-row">
<div class="step-container" id="111">
<div class="step-ref passed">111</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.token_type == '#string'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="112">
<div class="step-ref passed">112</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.access_token == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="113">
<div class="step-ref passed">113</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def tokenType = response.token_type</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="114">
<div class="step-ref passed">114</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def accessToken = response.access_token</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="115">
<div class="step-ref passed">115</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def access_token = tokenType+' '+accessToken</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="116">
<div class="step-ref passed">116</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="116">18:33:02.556 [print] Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g</div>
<div class="step-row">
<div class="step-container" id="117">
<div class="step-ref passed">117</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********AccessTokenGenerated*********'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="117">18:33:02.558 [print] *********AccessTokenGenerated*********</div>
<div class="step-row">
<div class="step-container" id="118">
<div class="step-ref passed">118</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/Loan_Eligibility.feature')</div>
</div>
<div class="time-cell passed">1333</div>
</div>
<div class="step-row">
<div class="step-container" id="118.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/Loan_Eligibility.feature</div>
</div>
<div class="time-cell passed">1321</div>
</div>
<div class="step-row">
<div class="step-container" id="119">
<div class="step-ref passed">119</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">34</div>
</div>
<div class="step-row">
<div class="step-container" id="119.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">21</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="120">
<div class="step-ref passed">120</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="120">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="121">
<div class="step-ref passed">121</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="122">
<div class="step-ref passed">122</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="122">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="123">
<div class="step-ref passed">123</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="124">
<div class="step-ref passed">124</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="124">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="125">
<div class="step-ref passed">125</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="126">
<div class="step-ref passed">126</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="126">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="127">
<div class="step-ref passed">127</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container" id="128">
<div class="step-ref passed">128</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="128">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="129">
<div class="step-ref passed">129</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="130">
<div class="step-ref passed">130</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="130">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="131">
<div class="step-ref passed">131</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="131">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="132">
<div class="step-ref passed">132</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="132">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="133">
<div class="step-ref passed">133</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="133">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="134">
<div class="step-ref passed">134</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="134">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="135">
<div class="step-ref passed">135</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/eligibility'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="136">
<div class="step-ref passed">136</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="137">
<div class="step-ref passed">137</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="138">
<div class="step-ref passed">138</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="139">
<div class="step-ref passed">139</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="140">
<div class="step-ref passed">140</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">1242</div>
</div>
<div class="preformatted" data-parent="140">18:33:02.610 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/eligibility
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 56-7176-48880943-6-7

18:33:03.849 response time in milliseconds: 1237.22
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 085ef83d-2680-4bed-b25c-c0146094d26d
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Length: 394
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:04 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:04 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 56-7176-48880943-6-7
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241687d43822f1
1 &lt; X-Vcap-Request-Id: 9129a594-d1bd-455c-6c54-e87abb8800d4
1 &lt; mfaCode: hqRY6TFN89AFIorIQ0QWN1%2F1VQtMpLUM6a4U4kZm2Xp%2BPReleRVbTMHpkmw40S4OD9dKZ8CsoDLiYZy0OzTqfpw%2B63eSdVYxzp%2F9Dj08Oeb%2FkVd4LU7APvmDsVH4M143Du3pbHohSEWR2Xkvwlcds%2Fc%2BvlaYRILfOk19%2FEOg3Tvw0HPCXI7hTa6iLDaKjYNHdc7DAnQWBjmZT7gi4%2Fjdq6wMl5fO1CK48wLFjgr%2FJDlBJTCQ%2FfC8j5cN5TvYfNXlO7uTBF7N1SKPObVZd9UNG3LLvt%2Bw2FYT%2Bvz%2B0QdFrnN0P4m5bT4oCDrdOx4xMPtOvK6g11YVEZzuCN416hBo%2FJtJubac8y8dAw6kdrrIzG0%2BrfJ5FdTP15z3FqrHrrEeptg3r2A6542hUVBVWEIF%2B8vx7LxU2tj77ZWbZor7I9c%3D
{"loanEligibilityDetails":[{"accountId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","displayAccountNumber":"4765","lopSupportedAccountGroup":"CREDIT_CARD","maximumEligibleLoanAmount":500000.0,"minimumEligibleLoanAmount":50000.0,"offerIndicator":"RATE_BASED","interestCalculationMethod":"REDUCING_BALANCE_METHOD","lopCategory":"LOAN_OVER_PHONE"}]}</div>
<div class="step-row">
<div class="step-container" id="141">
<div class="step-ref passed">141</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="142">
<div class="step-ref passed">142</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="142">18:33:03.850 [print] {
  "loanEligibilityDetails": [
    {
      "minimumEligibleLoanAmount": 50000.0,
      "accountId": "44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d",
      "interestCalculationMethod": "REDUCING_BALANCE_METHOD",
      "offerIndicator": "RATE_BASED",
      "lopSupportedAccountGroup": "CREDIT_CARD",
      "displayAccountNumber": "4765",
      "lopCategory": "LOAN_OVER_PHONE",
      "maximumEligibleLoanAmount": 500000.0
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="143">
<div class="step-ref passed">143</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].displayAccountNumber == '#string'</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="144">
<div class="step-ref passed">144</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].accountId == '#present'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="145">
<div class="step-ref passed">145</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].maximumEligibleLoanAmount == 500000</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="146">
<div class="step-ref passed">146</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].minimumEligibleLoanAmount == 50000</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="147">
<div class="step-ref passed">147</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def displayAccountNumber = response.loanEligibilityDetails[0].displayAccountNumber</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container" id="148">
<div class="step-ref passed">148</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def accountId = response.loanEligibilityDetails[0].accountId</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container" id="149">
<div class="step-ref passed">149</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def maximumEligibleLoanAmount = response.loanEligibilityDetails[0].maximumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="150">
<div class="step-ref passed">150</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def minimumEligibleLoanAmount = response.loanEligibilityDetails[0].minimumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="151">
<div class="step-ref passed">151</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print displayAccountNumber</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="151">18:33:03.889 [print] 4765</div>
<div class="step-row">
<div class="step-container" id="152">
<div class="step-ref passed">152</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print accountId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="152">18:33:03.889 [print] 44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d</div>
<div class="step-row">
<div class="step-container" id="153">
<div class="step-ref passed">153</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print maximumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="153">18:33:03.889 [print] 500000.0</div>
<div class="step-row">
<div class="step-container" id="154">
<div class="step-ref passed">154</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print minimumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="154">18:33:03.889 [print] 50000.0</div>
<div class="step-row">
<div class="step-container" id="155">
<div class="step-ref passed">155</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Checked Loan Eligibility And AccountId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="155">18:33:03.891 [print] ********* Checked Loan Eligibility And AccountId Generated *********</div>
<div class="step-row">
<div class="step-container" id="156">
<div class="step-ref passed">156</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/Check_EPP_Plan.feature')</div>
</div>
<div class="time-cell passed">849</div>
</div>
<div class="step-row">
<div class="step-container" id="156.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/Check_EPP_Plan.feature</div>
</div>
<div class="time-cell passed">830</div>
</div>
<div class="step-row">
<div class="step-container" id="157">
<div class="step-ref passed">157</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">25</div>
</div>
<div class="step-row">
<div class="step-container" id="157.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="158">
<div class="step-ref passed">158</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="158">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="159">
<div class="step-ref passed">159</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="160">
<div class="step-ref passed">160</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="160">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="161">
<div class="step-ref passed">161</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="162">
<div class="step-ref passed">162</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="162">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="163">
<div class="step-ref passed">163</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="164">
<div class="step-ref passed">164</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="164">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="165">
<div class="step-ref passed">165</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="166">
<div class="step-ref passed">166</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="166">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="167">
<div class="step-ref passed">167</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="168">
<div class="step-ref passed">168</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="168">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="169">
<div class="step-ref passed">169</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="169">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="170">
<div class="step-ref passed">170</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="170">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="171">
<div class="step-ref passed">171</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="171">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="172">
<div class="step-ref passed">172</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="172">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/Loan_Eligibility.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="173">
<div class="step-ref passed">173</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/'+accountId+'/transactions/eligibility/easyPaymentPlan?eligbleLoanAmount=50000'</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="174">
<div class="step-ref passed">174</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="175">
<div class="step-ref passed">175</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="176">
<div class="step-ref passed">176</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="177">
<div class="step-ref passed">177</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="178">
<div class="step-ref passed">178</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">785</div>
</div>
<div class="preformatted" data-parent="178">18:33:03.944 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/transactions/eligibility/easyPaymentPlan?eligbleLoanAmount=50000
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 6317--13608-54877026

18:33:04.725 response time in milliseconds: 781.32
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 502d2a47-1190-4267-ae7e-21eb0c13dd79
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:05 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:05 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 6317--13608-54877026
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f2416889c5634cd
1 &lt; X-Vcap-Request-Id: e422ee75-c72e-42ce-4225-3085a1cd0f1b
1 &lt; mfaCode: zB5bAzxCuOjRLjsIVEu3v41DkRfOpvSPk3grzUeURDg9rbwb2XTL1cyaXPS8A6d5NJYBMdxnQ1Fcby3WHPDkZMGXbpjxIPwbi9ZSfSCAeURKZ2Bqjn6LXoDvq6DMaO83%2BJfJLxcww3Ky%2BfpvZzRy%2FAuRyaaTut6sY5hzO1iF4waoLghhH6eA6kvhrQTCY7dJADfGdxmVfDE6K4pdLG4m%2BDLBey0FumXsE58wj8kOWwFUZj3p1zlektVSfrxE312aZQ8cr0NT01GEqK63DsvK6ofS5PIP7XyXEhWMBVtvtqv1D7ecXxDgcRAjZ%2FMgaCU0EB2xKV%2FWuT7MwvDGOxoVOWX3jNewfX4aHERlV68as%2B8IF%2BdHRek%2BF%2BZhUcMo%2B4%2BaWDRHxJuT60xzN3dmUgZAJi%2B9CrDU18q83Kb%2FjjZmLes%3D
{"easyPaymentPlan":[{"tenor":"3","effectiveInterestRate":12.99,"annualPercentageRate":13.67,"installmentAmount":16666.67,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"6","effectiveInterestRate":25.99,"annualPercentageRate":26.67,"installmentAmount":8333.34,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"12","effectiveInterestRate":42.99,"annualPercentageRate":43.67,"installmentAmount":4166.67,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"24","effectiveInterestRate":72.99,"annualPercentageRate":73.67,"installmentAmount":2083.34,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"}]}</div>
<div class="step-row">
<div class="step-container" id="179">
<div class="step-ref passed">179</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="180">
<div class="step-ref passed">180</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="180">18:33:04.727 [print] {
  "easyPaymentPlan": [
    {
      "tenor": "3",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 13.67,
      "installmentAmount": 16666.67,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 12.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "6",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 26.67,
      "installmentAmount": 8333.34,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 25.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "12",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 43.67,
      "installmentAmount": 4166.67,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 42.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "24",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 73.67,
      "installmentAmount": 2083.34,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 72.99,
      "oneTimeProcessingFeeAmount": 15.15
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="181">
<div class="step-ref passed">181</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[0].tenor == '3'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="182">
<div class="step-ref passed">182</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[1].tenor == '6'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="183">
<div class="step-ref passed">183</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[2].tenor == '12'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="184">
<div class="step-ref passed">184</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[3].tenor == '24'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="185">
<div class="step-ref passed">185</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked Easy payment plan using AccountId*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="185">18:33:04.741 [print] *********Checked Easy payment plan using AccountId*********</div>
<div class="step-row">
<div class="step-container" id="186">
<div class="step-ref passed">186</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/RepaymentSchedule.feature')</div>
</div>
<div class="time-cell passed">768</div>
</div>
<div class="step-row">
<div class="step-container" id="186.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/RepaymentSchedule.feature</div>
</div>
<div class="time-cell passed">756</div>
</div>
<div class="step-row">
<div class="step-container" id="187">
<div class="step-ref passed">187</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">33</div>
</div>
<div class="step-row">
<div class="step-container" id="187.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="188">
<div class="step-ref passed">188</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="188">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="189">
<div class="step-ref passed">189</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="190">
<div class="step-ref passed">190</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="190">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="191">
<div class="step-ref passed">191</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="192">
<div class="step-ref passed">192</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="192">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="193">
<div class="step-ref passed">193</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="194">
<div class="step-ref passed">194</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="194">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="195">
<div class="step-ref passed">195</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="196">
<div class="step-ref passed">196</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="196">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="197">
<div class="step-ref passed">197</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="198">
<div class="step-ref passed">198</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="198">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="199">
<div class="step-ref passed">199</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="199">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="200">
<div class="step-ref passed">200</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="200">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="201">
<div class="step-ref passed">201</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="201">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="202">
<div class="step-ref passed">202</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="202">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="203">
<div class="step-ref passed">203</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/'+accountId+'/easyPaymentPlans/repaymentSchedules?loanAmount=50000&amp;tenor=6'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="204">
<div class="step-ref passed">204</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="205">
<div class="step-ref passed">205</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="206">
<div class="step-ref passed">206</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="207">
<div class="step-ref passed">207</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="208">
<div class="step-ref passed">208</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">701</div>
</div>
<div class="preformatted" data-parent="208">18:33:04.791 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/easyPaymentPlans/repaymentSchedules?loanAmount=50000&amp;tenor=6
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 631287--0-7-838280-7

18:33:05.487 response time in milliseconds: 695.18
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 84a0e45c-85cf-40ec-ab5b-addebd6a099a
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:06 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:06 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 631287--0-7-838280-7
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f241689ea80fcef
1 &lt; X-Vcap-Request-Id: 3f207c5e-b7d4-4da1-7612-6ed06397c716
1 &lt; mfaCode: 1AP6pdqoRjGGG2LRbJ4UcXqJ0nqYlu2PxlC5w8I56998WDRBP7U7aeynG81ZPnNjIlXlaND8G7C3rnRtmEgEQPlAs9CTAosJ%2BRb3SV4v0GI%2BIENClPJ%2FAy8Sh%2BML1YJvAr3wyFCXYOetEoJinl5NrfovRsn6%2ByvmAkyOe9A7c16IHx0GmuB8lIALJhcjrbUT0Dps34p14lHH4DoGcJY4RuICiRix5ooMwlB%2FVfSob4Ntnsdh42Tfz50qVO4QJ9LaWY4u8Rz2QyVghCzSRUfNJcksNiS9uHfhPy94t4QdBmtFs7TAF2oah2g0Ds%2FbRFT3MAPHZe9OLYeWrPd2ZUnWNI3%2F7QSG0XDfJzqQc8fG8lBzCUKrt%2FG1VO0p7Ac%2BJdWmCOcNIj4nsS%2FR%2BQoON2d%2Fdi4%2BGjzA7%2B1ZR00aUwhiC1A%3D
{"eppAmortizationSchedule":[{"installmentNumber":"1","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":41666.66,"installmentDate":"07/2020"},{"installmentNumber":"2","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":33333.32,"installmentDate":"08/2020"},{"installmentNumber":"3","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":24999.98,"installmentDate":"09/2020"},{"installmentNumber":"4","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":16666.64,"installmentDate":"10/2020"},{"installmentNumber":"5","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":8333.300000000003,"installmentDate":"11/2020"},{"installmentNumber":"6","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":-0.040000000000873115,"installmentDate":"12/2020"}],"totalLoanCost":50000.0}</div>
<div class="step-row">
<div class="step-container" id="209">
<div class="step-ref passed">209</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="210">
<div class="step-ref passed">210</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="210">18:33:05.492 [print] {
  "eppAmortizationSchedule": [
    {
      "installmentNumber": "1",
      "installmentDate": "07/2020",
      "outstandingPrincipalAmount": 41666.66,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "2",
      "installmentDate": "08/2020",
      "outstandingPrincipalAmount": 33333.32,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "3",
      "installmentDate": "09/2020",
      "outstandingPrincipalAmount": 24999.98,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "4",
      "installmentDate": "10/2020",
      "outstandingPrincipalAmount": 16666.64,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "5",
      "installmentDate": "11/2020",
      "outstandingPrincipalAmount": 8333.300000000003,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "6",
      "installmentDate": "12/2020",
      "outstandingPrincipalAmount": -0.040000000000873115,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    }
  ],
  "totalLoanCost": 50000.0
}</div>
<div class="step-row">
<div class="step-container" id="211">
<div class="step-ref passed">211</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[0].installmentNumber == '1'</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="212">
<div class="step-ref passed">212</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[1].installmentNumber == '2'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="213">
<div class="step-ref passed">213</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[2].installmentNumber == '3'</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="214">
<div class="step-ref passed">214</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[3].installmentNumber == '4'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="215">
<div class="step-ref passed">215</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[4].installmentNumber == '5'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="216">
<div class="step-ref passed">216</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[5].installmentNumber == '6'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="217">
<div class="step-ref passed">217</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked reschedule payment plan using AccountId And Tenor*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="217">18:33:05.509 [print] *********Checked reschedule payment plan using AccountId And Tenor*********</div>
<div class="step-row">
<div class="step-container" id="218">
<div class="step-ref passed">218</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/LoanBooking.feature')</div>
</div>
<div class="time-cell passed">798</div>
</div>
<div class="step-row">
<div class="step-container" id="218.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/LoanBooking.feature</div>
</div>
<div class="time-cell passed">787</div>
</div>
<div class="step-row">
<div class="step-container" id="219">
<div class="step-ref passed">219</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">25</div>
</div>
<div class="step-row">
<div class="step-container" id="219.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">14</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="220">
<div class="step-ref passed">220</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="220">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="221">
<div class="step-ref passed">221</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="222">
<div class="step-ref passed">222</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="222">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="223">
<div class="step-ref passed">223</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="224">
<div class="step-ref passed">224</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="224">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="225">
<div class="step-ref passed">225</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="226">
<div class="step-ref passed">226</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="226">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="227">
<div class="step-ref passed">227</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="228">
<div class="step-ref passed">228</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="228">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="229">
<div class="step-ref passed">229</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="230">
<div class="step-ref passed">230</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="230">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="231">
<div class="step-ref passed">231</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="231">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="232">
<div class="step-ref passed">232</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="232">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="233">
<div class="step-ref passed">233</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="233">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="234">
<div class="step-ref passed">234</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="234">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="235">
<div class="step-ref passed">235</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def loanBookingRequest = read('classpath:Citibank/lop/LoanBookingRequest.json')</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container" id="236">
<div class="step-ref passed">236</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/bookings'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="237">
<div class="step-ref passed">237</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="238">
<div class="step-ref passed">238</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="239">
<div class="step-ref passed">239</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="240">
<div class="step-ref passed">240</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="241">
<div class="step-ref passed">241</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="242">
<div class="step-ref passed">242</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request loanBookingRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="243">
<div class="step-ref passed">243</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">745</div>
</div>
<div class="preformatted" data-parent="243">18:33:05.556 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/bookings
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 469
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 67428--13-4066372-1-
{"loanAmount":60000,"disbursementOption":"PERSONAL_ACCOUNT","disbursementAccountId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","tenor":12,"bankDetails":{"bankCode":"DBSSG0XXX","bankName":"HSBC Bank","branchCode":"10034","accountNumber":"5396100020088653"},"loanPurpose":"EDUCATION_OVERSEAS","employmentStatus":"PRIVATE_EMPLOYEE","occupationCode":"BUSINESS","highestEducationLevel":"GRADUATE","paymentReferenceId":123456}

18:33:06.299 response time in milliseconds: 740.94
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 980a7d10-b584-4305-9044-e1b74b847b93
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Length: 253
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:06 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:06 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 67428--13-4066372-1-
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 6e68aa425f24168adced922f
1 &lt; X-Vcap-Request-Id: b35737db-4413-4135-4e9d-19234779b672
1 &lt; mfaCode: swKYj7GF9chKkN3yzVOKCtqJrLIgrH%2FBeOOms0a2buel9xTjPDqgJE2zObxpmfIZeJeV9xULEUfDH%2BM0igVEIiI7tRdtCdbVlxO5VEL9xTijzcSmSOUvKIIYgn0hjtXyTihkjSW2lGI7bDJAzoB32kqjmbS6RARndxw7QpnGYGjI3wc8TbKu9Cm9e9hi6KGJlQs6UbFWRBA0RdqPMv3mwurqr6x1DmlQjRWaB1WPWf7ULbqkAM8EJxTFNU4a5L9FatWV5b3I%2BcDZqtNXKO6TE2FR0SSsD%2Fv1MjKuDhTbRZE0XartNUsEi3bZWLu5OnTWlqo2XLMgE6GxUzgiR1SrSCD8J6XU%2BLLEhD5T%2FNiUW1xAvECR0OvsLyceeDF231GtMsj%2FChiFddm1%2B84tPtmqiCkuvPIcXmYPU7G41i1YT%2Bw%3D
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"ylAQE6TwKmOAyCfYXvyDoAaSnPbcfOAuSBi3rNyV","status":"generated","mfaResponse":{"maskedPhoneNumber":"XXXXXXXX0056"},"otpDeliveryOption":["SMS"]}}</div>
<div class="step-row">
<div class="step-container" id="244">
<div class="step-ref passed">244</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="245">
<div class="step-ref passed">245</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="245">18:33:06.300 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "ylAQE6TwKmOAyCfYXvyDoAaSnPbcfOAuSBi3rNyV",
    "mfaType": "otp",
    "mfaResponse": {
      "maskedPhoneNumber": "XXXXXXXX0056"
    },
    "otpDeliveryOption": [
      "SMS"
    ],
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="246">
<div class="step-ref passed">246</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.moreInfo.controlFlowId == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="247">
<div class="step-ref passed">247</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def loanBookingControlFlowId = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="248">
<div class="step-ref passed">248</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print loanBookingControlFlowId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="248">18:33:06.305 [print] ylAQE6TwKmOAyCfYXvyDoAaSnPbcfOAuSBi3rNyV</div>
<div class="step-row">
<div class="step-container" id="249">
<div class="step-ref passed">249</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Loan Booked And Control FlowId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="249">18:33:06.307 [print] ********* Loan Booked And Control FlowId Generated *********</div>
<div class="step-row">
<div class="step-container" id="250">
<div class="step-ref passed">250</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/DisbursmentOption.feature')</div>
</div>
<div class="time-cell passed">753</div>
</div>
<div class="step-row">
<div class="step-container" id="250.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/DisbursmentOption.feature</div>
</div>
<div class="time-cell passed">742</div>
</div>
<div class="step-row">
<div class="step-container" id="251">
<div class="step-ref passed">251</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">27</div>
</div>
<div class="step-row">
<div class="step-container" id="251.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">17</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="252">
<div class="step-ref passed">252</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="252">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="253">
<div class="step-ref passed">253</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="254">
<div class="step-ref passed">254</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="254">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="255">
<div class="step-ref passed">255</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="256">
<div class="step-ref passed">256</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="256">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="257">
<div class="step-ref passed">257</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="258">
<div class="step-ref passed">258</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="258">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="259">
<div class="step-ref passed">259</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="260">
<div class="step-ref passed">260</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="260">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="261">
<div class="step-ref passed">261</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="262">
<div class="step-ref passed">262</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="262">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="263">
<div class="step-ref passed">263</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="263">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="264">
<div class="step-ref passed">264</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="264">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="265">
<div class="step-ref passed">265</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="265">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="266">
<div class="step-ref passed">266</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="266">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="267">
<div class="step-ref passed">267</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/disbursementOptions'</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="268">
<div class="step-ref passed">268</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="269">
<div class="step-ref passed">269</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">8</div>
</div>
<div class="step-row">
<div class="step-container" id="270">
<div class="step-ref passed">270</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="271">
<div class="step-ref passed">271</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="272">
<div class="step-ref passed">272</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">696</div>
</div>
<div class="preformatted" data-parent="272">18:33:06.358 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/disbursementOptions
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 513-7587495107877-4-

18:33:07.052 response time in milliseconds: 657.95
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: e150f30c-901f-47b0-a8bb-7e778a427b34
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:07 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:07 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 513-7587495107877-4-
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f24168bbdcea911
1 &lt; X-Vcap-Request-Id: 84785756-5218-4b0f-7e30-127075c26f3f
1 &lt; mfaCode: TcNC%2B8LOAyy5ydSr9m67bwEpIn8uD6i4MK97LUcwoBEveX1Lo0ilJFYYQlHlIJdLMNeRyC1MAlkjtKjHGKPjqR4qYM%2BSd7pd%2Bt2WB5k1DO38iRVQ6erkHteTCB4bfPG5ogoPU5E19vnAXMAcgi%2FKv86xqdrmOwh9UfrcVyWVEZMGXBDChFkoN%2B5GMB0F0lrmo2vuXLhJVM0fMvuPpysratPpajh9oUQXtc8m%2FogV%2FcLP3W0ahGAvY75aqJL6TKEp3%2FApanHflVXEtbsuFziEKz0ZYn2gHc55L34TSDUbBEw0wQBVB2raefTps2KxKgO53i267MK%2F4eEhYFmC7qGal6qcziw1Fd7wb30u3n9P9sIrCKc0upXxFPr9yVvYaLviCCsuT2wC%2B%2F1%2FN%2Ffr9Kur%2BzcHeLLc%2FzxvWXXaMwQE7qk%3D
{"disbursementOptions":[{"disbursementOption":"BANK_ACCOUNT"}]}</div>
<div class="step-row">
<div class="step-container" id="273">
<div class="step-ref passed">273</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="274">
<div class="step-ref passed">274</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="274">18:33:07.053 [print] {
  "disbursementOptions": [
    {
      "disbursementOption": "BANK_ACCOUNT"
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="275">
<div class="step-ref passed">275</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.disbursementOptions[0].disbursementOption == 'BANK_ACCOUNT'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="276">
<div class="step-ref passed">276</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* DisbursmentOption Details checked *********'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="276">18:33:07.059 [print] ********* DisbursmentOption Details checked *********</div>
<div class="step-row">
<div class="step-container" id="277">
<div class="step-ref passed">277</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/BookedLoanRepayment.feature')</div>
</div>
<div class="time-cell passed">881</div>
</div>
<div class="step-row">
<div class="step-container" id="277.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/BookedLoanRepayment.feature</div>
</div>
<div class="time-cell passed">861</div>
</div>
<div class="step-row">
<div class="step-container" id="278">
<div class="step-ref passed">278</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">25</div>
</div>
<div class="step-row">
<div class="step-container" id="278.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="279">
<div class="step-ref passed">279</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="279">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="280">
<div class="step-ref passed">280</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="281">
<div class="step-ref passed">281</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="281">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="282">
<div class="step-ref passed">282</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="283">
<div class="step-ref passed">283</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="283">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="284">
<div class="step-ref passed">284</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="285">
<div class="step-ref passed">285</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="285">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="286">
<div class="step-ref passed">286</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="287">
<div class="step-ref passed">287</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="287">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="288">
<div class="step-ref passed">288</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="289">
<div class="step-ref passed">289</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="289">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="290">
<div class="step-ref passed">290</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="290">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="291">
<div class="step-ref passed">291</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="291">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="292">
<div class="step-ref passed">292</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="292">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="293">
<div class="step-ref passed">293</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="293">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="294">
<div class="step-ref passed">294</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/repaymentSchedules?loanAmount=60000&amp;tenor=12'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="295">
<div class="step-ref passed">295</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="296">
<div class="step-ref passed">296</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="297">
<div class="step-ref passed">297</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="298">
<div class="step-ref passed">298</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="299">
<div class="step-ref passed">299</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">806</div>
</div>
<div class="preformatted" data-parent="299">18:33:07.111 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/repaymentSchedules?loanAmount=60000&amp;tenor=12
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 28836427794237716479

18:33:07.913 response time in milliseconds: 800.65
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 33d3ffeb-21ec-4a8c-95c5-5d5c3aadb274
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:08 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:08 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 28836427794237716479
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f24168cea81d04f
1 &lt; X-Vcap-Request-Id: bf350993-f7f4-4057-6cca-be8ac18cfc2a
1 &lt; mfaCode: lS934OdvTHDrzm3r7LGFrudpzDKdsPXu%2FdTaQ3SGodbR1hAsRxY4019LG8zdvcN%2BXmmREBJZmkWCIqfiD0w%2FU0rN%2F%2FPiCBg4rF4NqIYPPZ0SjaQJD%2BubpNnRfxl7konfSMLXKQoy1e3owOIE4pXLysL%2B9Y4151S1j8da%2BbbBGVM2M2n%2FsgVlqbwguyJ%2Fzpi%2FLlMvPfS0phL209T9XXSNgk2UW3rjixnHqBGl7wJy0dHWAYLekRNMSy%2BzPY7Kt%2FsPSSBXdBjeyDbwuLWJHn%2FxhgixxM3FXNeMBN3p5gcv9FxKxFKMDiqEOyKAvIH4Ov9eFKqpxC6tHDA09lReYVmbgG31NlAaY7%2BXX8sUPS0UgOq451OihpkLUxUtSIY5%2FdQzEE8t4qLTS58gQ9766AdoGEkPTW%2FBaDDkiMxpV7vgJ9U%3D
{"amortizationSchedule":[{"installmentNumber":"1","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":55000.0},{"installmentNumber":"2","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":50000.0},{"installmentNumber":"3","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":45000.0},{"installmentNumber":"4","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":40000.0},{"installmentNumber":"5","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":35000.0},{"installmentNumber":"6","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":30000.0},{"installmentNumber":"7","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":25000.0},{"installmentNumber":"8","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":20000.0},{"installmentNumber":"9","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":15000.0},{"installmentNumber":"10","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":10000.0},{"installmentNumber":"11","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":5000.0},{"installmentNumber":"12","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":0.0}],"totalLoanCost":60000.0}</div>
<div class="step-row">
<div class="step-container" id="300">
<div class="step-ref passed">300</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="301">
<div class="step-ref passed">301</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="301">18:33:07.915 [print] {
  "amortizationSchedule": [
    {
      "installmentNumber": "1",
      "outstandingPrincipalAmount": 55000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "2",
      "outstandingPrincipalAmount": 50000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "3",
      "outstandingPrincipalAmount": 45000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "4",
      "outstandingPrincipalAmount": 40000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "5",
      "outstandingPrincipalAmount": 35000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "6",
      "outstandingPrincipalAmount": 30000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "7",
      "outstandingPrincipalAmount": 25000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "8",
      "outstandingPrincipalAmount": 20000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "9",
      "outstandingPrincipalAmount": 15000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "10",
      "outstandingPrincipalAmount": 10000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "11",
      "outstandingPrincipalAmount": 5000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "12",
      "outstandingPrincipalAmount": 0.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    }
  ],
  "totalLoanCost": 60000.0
}</div>
<div class="step-row">
<div class="step-container" id="302">
<div class="step-ref passed">302</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[0].installmentNumber == '1'</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="303">
<div class="step-ref passed">303</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[1].installmentNumber == '2'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="304">
<div class="step-ref passed">304</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[2].installmentNumber == '3'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="305">
<div class="step-ref passed">305</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[3].installmentNumber == '4'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="306">
<div class="step-ref passed">306</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[4].installmentNumber == '5'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="307">
<div class="step-ref passed">307</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[5].installmentNumber == '6'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="308">
<div class="step-ref passed">308</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[6].installmentNumber == '7'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="309">
<div class="step-ref passed">309</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[7].installmentNumber == '8'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="310">
<div class="step-ref passed">310</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[8].installmentNumber == '9'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="311">
<div class="step-ref passed">311</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[9].installmentNumber == '10'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="312">
<div class="step-ref passed">312</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[10].installmentNumber == '11'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="313">
<div class="step-ref passed">313</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[11].installmentNumber == '12'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="314">
<div class="step-ref passed">314</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked repayment Schedule plan for particular customer using AccountId And Tenor*********'</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="314">18:33:07.941 [print] *********Checked repayment Schedule plan for particular customer using AccountId And Tenor*********</div>
<div class="step-row">
<div class="step-container" id="315">
<div class="step-ref passed">315</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/E2E_Key.feature')</div>
</div>
<div class="time-cell passed">730</div>
</div>
<div class="step-row">
<div class="step-container" id="315.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/E2E_Key.feature</div>
</div>
<div class="time-cell passed">716</div>
</div>
<div class="step-row">
<div class="step-container" id="316">
<div class="step-ref passed">316</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">30</div>
</div>
<div class="step-row">
<div class="step-container" id="316.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">20</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="317">
<div class="step-ref passed">317</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="317">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="318">
<div class="step-ref passed">318</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="319">
<div class="step-ref passed">319</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="319">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="320">
<div class="step-ref passed">320</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="321">
<div class="step-ref passed">321</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="321">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="322">
<div class="step-ref passed">322</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="323">
<div class="step-ref passed">323</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="323">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="324">
<div class="step-ref passed">324</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="325">
<div class="step-ref passed">325</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="325">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="326">
<div class="step-ref passed">326</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="327">
<div class="step-ref passed">327</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="327">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="328">
<div class="step-ref passed">328</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="328">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="329">
<div class="step-ref passed">329</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="329">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="330">
<div class="step-ref passed">330</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="330">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="331">
<div class="step-ref passed">331</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="331">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="332">
<div class="step-ref passed">332</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/security/e2eKey'</div>
</div>
<div class="time-cell passed">33</div>
</div>
<div class="step-row">
<div class="step-container" id="333">
<div class="step-ref passed">333</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="334">
<div class="step-ref passed">334</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="335">
<div class="step-ref passed">335</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="336">
<div class="step-ref passed">336</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="337">
<div class="step-ref passed">337</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">633</div>
</div>
<div class="preformatted" data-parent="337">18:33:08.021 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/security/e2eKey
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: -063535-5-38-575-4-7

18:33:08.652 response time in milliseconds: 629.62
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: f8f3d10b-700b-4fa3-8d91-029f548bd498
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:09 GMT
1 &lt; Eventid: 1fbba9e7-f441-41e9-9364-ab8c2d7fb219
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:09 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: -063535-5-38-575-4-7
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f24168c9c56834d
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,59;
1 &lt; X-Vcap-Request-Id: 8f26364b-dfba-4d37-5492-4f6a8fc0f235
1 &lt; responseTimeStamp: 2020-07-31T13:03:09:192
{"modulus":"25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517","exponent":"65537"}</div>
<div class="step-row">
<div class="step-container" id="338">
<div class="step-ref passed">338</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="339">
<div class="step-ref passed">339</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="339">18:33:08.653 [print] {
  "modulus": "25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517",
  "exponent": "65537"
}</div>
<div class="step-row">
<div class="step-container" id="340">
<div class="step-ref passed">340</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.modulus == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="341">
<div class="step-ref passed">341</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.exponent == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="342">
<div class="step-ref passed">342</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print modulus = response.modulus</div>
</div>
<div class="time-cell passed">9</div>
</div>
<div class="preformatted" data-parent="342">18:33:08.663 [print] 25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517</div>
<div class="step-row">
<div class="step-container" id="343">
<div class="step-ref passed">343</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print exponent = response.exponent</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="343">18:33:08.668 [print] 65537</div>
<div class="step-row">
<div class="step-container" id="344">
<div class="step-ref passed">344</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Modulus and Exponent Generated *********'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="344">18:33:08.670 [print] ********* Modulus and Exponent Generated *********</div>
<div class="step-row">
<div class="step-container" id="345">
<div class="step-ref passed">345</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/ValidateOTP.feature')</div>
</div>
<div class="time-cell passed">1339</div>
</div>
<div class="step-row">
<div class="step-container" id="345.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/ValidateOTP.feature</div>
</div>
<div class="time-cell passed">1288</div>
</div>
<div class="step-row">
<div class="step-container" id="346">
<div class="step-ref passed">346</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">68</div>
</div>
<div class="step-row">
<div class="step-container" id="346.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">21</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="347">
<div class="step-ref passed">347</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="preformatted" data-parent="347">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="348">
<div class="step-ref passed">348</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">7</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="349">
<div class="step-ref passed">349</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="349">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="350">
<div class="step-ref passed">350</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="351">
<div class="step-ref passed">351</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="351">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="352">
<div class="step-ref passed">352</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="353">
<div class="step-ref passed">353</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="353">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="354">
<div class="step-ref passed">354</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="355">
<div class="step-ref passed">355</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="355">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="356">
<div class="step-ref passed">356</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="357">
<div class="step-ref passed">357</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="357">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="358">
<div class="step-ref passed">358</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="358">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="359">
<div class="step-ref passed">359</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="359">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="360">
<div class="step-ref passed">360</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="360">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="361">
<div class="step-ref passed">361</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="361">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="362">
<div class="step-ref passed">362</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def otpRequest = read('classpath:Citibank/lop/OTPValidationRequest.json')</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container" id="363">
<div class="step-ref passed">363</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/mfa/otp'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="364">
<div class="step-ref passed">364</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="365">
<div class="step-ref passed">365</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="366">
<div class="step-ref passed">366</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="367">
<div class="step-ref passed">367</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="368">
<div class="step-ref passed">368</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="369">
<div class="step-ref passed">369</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* set otpRequest.controlFlowId = loanBookingControlFlowId</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="370">
<div class="step-ref passed">370</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print otpRequest</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="370">18:33:08.767 [print] {
  "otpDeliveryOption": "SMS",
  "otpToken": "77219F78B16B130E4894E768F08567F06470F59AAC12722D943276877C30567E8E78462F03F3D2BE5679E1AC109530F1CE7F340DB5DB342AEC0C822777D3C3B3B751A7850FAE738FF8DFCB6C805650FD0FBA90FF8E8F4A16AA1A6DC74C44A39B23512336F02C70C02D5BFCF0FAEA4170F98812B3FA9D21DE8239B300A0FFF259",
  "transactionMemo": "ENROLLCARD",
  "controlFlowId": "ylAQE6TwKmOAyCfYXvyDoAaSnPbcfOAuSBi3rNyV"
}</div>
<div class="step-row">
<div class="step-container" id="371">
<div class="step-ref passed">371</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request otpRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="372">
<div class="step-ref passed">372</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method put</div>
</div>
<div class="time-cell passed">1202</div>
</div>
<div class="preformatted" data-parent="372">18:33:08.807 request:
1 &gt; PUT https://sandbox.apihub.citi.com/gcb/api/v1/mfa/otp
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5-C_GWDtWE03yOupM-nDND2rVGxkXquqHcsvUAuBX8I9Bnks6sz-e13mQs4KKlJkLhC6BVtD5OaVzH8Ke29VK9VeXAoSvKPUsNdad6iKvbLPZu-wbpFlR9oyLfJGigeTiEwL1N5gtBEJUBeVUeH3sf5I9aZgS85719q4RJNQhXiPkwAy6Z6OAfo-ucE47l7HiSAfcyd1Ky4vZzZXjAKza8g
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 387
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 0--842-7889918-5-67-
{"otpDeliveryOption":"SMS","otpToken":"77219F78B16B130E4894E768F08567F06470F59AAC12722D943276877C30567E8E78462F03F3D2BE5679E1AC109530F1CE7F340DB5DB342AEC0C822777D3C3B3B751A7850FAE738FF8DFCB6C805650FD0FBA90FF8E8F4A16AA1A6DC74C44A39B23512336F02C70C02D5BFCF0FAEA4170F98812B3FA9D21DE8239B300A0FFF259","transactionMemo":"ENROLLCARD","controlFlowId":"ylAQE6TwKmOAyCfYXvyDoAaSnPbcfOAuSBi3rNyV"}

18:33:10.002 response time in milliseconds: 1193.52
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 099d3361-111d-4057-ab8b-1654c823820f
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Length: 0
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:10 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:10 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 0--842-7889918-5-67-
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f24168edcee447f
1 &lt; X-Vcap-Request-Id: ef6f1536-fa1e-4833-511a-d335afea8a40
1 &lt; mfaCode: oO80ceBug11mqq9EWFcGl9G2h3MsGWNSfxUp8781trrDAnsaRRM1ZM%2BgTFX2jpi4hX9PgvmyBysKXC%2FeQdBFVNc3Gns2cne8gVVO2UjpY5vA5%2FOuJwkRmO85kfJlmVbl7eFv%2B0Zfr77hBMoImFbNzipThgx5W1BDkYHUAJmuBBezswc8vQBfin0WfW0kXJQxnl8kEUdnmqhMijVugb4jHGBnJCdEc94OQrDZefgi%2BBlZ30cSehEf6cg%2B7OfsiZ2bnHmAGYF%2FHr4oC9X17s0v2oOFSjvYQll0r5H3SwbSezR2lVS%2BYnqWbl14yU%2FlIWUlNV5MuSg%2FnJlMKTVLEQY8RELQ0Hp%2FRq4NL3wn2fhY5%2FoYVtsM6ykNzFtCL4sE3xjjE%2Fq5Hirxe8h%2F6jc0hCPi9TvQDSI1Yqke80vo1FOl9XE%3D</div>
<div class="step-row">
<div class="step-container" id="373">
<div class="step-ref passed">373</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="374">
<div class="step-ref passed">374</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Verified OTP *********'</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="preformatted" data-parent="374">18:33:10.009 [print] ********* Verified OTP *********</div>
<div class="step-row">
<div class="step-container" id="375">
<div class="step-ref passed">375</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/LoanBookingConfirmation.feature')</div>
</div>
<div class="time-cell passed">9845</div>
</div>
<div class="step-row">
<div class="step-container" id="375.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/LoanBookingConfirmation.feature</div>
</div>
<div class="time-cell passed">9830</div>
</div>
<div class="step-row">
<div class="step-container" id="376">
<div class="step-ref passed">376</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">32</div>
</div>
<div class="step-row">
<div class="step-container" id="376.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">19</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="377">
<div class="step-ref passed">377</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="preformatted" data-parent="377">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="378">
<div class="step-ref passed">378</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="379">
<div class="step-ref passed">379</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="379">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="380">
<div class="step-ref passed">380</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="381">
<div class="step-ref passed">381</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="381">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="382">
<div class="step-ref passed">382</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="383">
<div class="step-ref passed">383</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="383">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="384">
<div class="step-ref passed">384</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="385">
<div class="step-ref passed">385</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="385">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="386">
<div class="step-ref passed">386</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="387">
<div class="step-ref passed">387</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="387">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="388">
<div class="step-ref passed">388</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="388">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="389">
<div class="step-ref passed">389</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="389">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="390">
<div class="step-ref passed">390</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="390">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="391">
<div class="step-ref passed">391</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="391">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="392">
<div class="step-ref passed">392</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell passed">865</div>
</div>
<div class="step-row">
<div class="step-container" id="392.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/CardAuthorization.feature</div>
</div>
<div class="time-cell passed">847</div>
</div>
<div class="step-row">
<div class="step-container" id="393">
<div class="step-ref passed">393</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">55</div>
</div>
<div class="step-row">
<div class="step-container" id="393.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">46</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="394">
<div class="step-ref passed">394</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">13</div>
</div>
<div class="preformatted" data-parent="394">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="395">
<div class="step-ref passed">395</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">15</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="396">
<div class="step-ref passed">396</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="396">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="397">
<div class="step-ref passed">397</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="398">
<div class="step-ref passed">398</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="398">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="399">
<div class="step-ref passed">399</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">8</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="400">
<div class="step-ref passed">400</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="400">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="401">
<div class="step-ref passed">401</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="402">
<div class="step-ref passed">402</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="402">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="403">
<div class="step-ref passed">403</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="404">
<div class="step-ref passed">404</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="404">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="405">
<div class="step-ref passed">405</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="405">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="406">
<div class="step-ref passed">406</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="406">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="407">
<div class="step-ref passed">407</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="407">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="408">
<div class="step-ref passed">408</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="408">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="409">
<div class="step-ref passed">409</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def CardAuthRequest = read('classpath:Citibank/lop/CardAuthorizationRequest.json')</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container" id="410">
<div class="step-ref passed">410</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="411">
<div class="step-ref passed">411</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="412">
<div class="step-ref passed">412</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="413">
<div class="step-ref passed">413</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="414">
<div class="step-ref passed">414</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">9</div>
</div>
<div class="step-row">
<div class="step-container" id="415">
<div class="step-ref passed">415</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="416">
<div class="step-ref passed">416</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request CardAuthRequest</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="417">
<div class="step-ref passed">417</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">753</div>
</div>
<div class="preformatted" data-parent="417">18:33:10.157 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 157
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 1187-5-5532763892963
{"grant_type":"card_authorization","lastFourDigitsCardNumber":"8653","citiCardHolderPhoneNumber":"6590020056","merchantCustomerReferenceId":"CB072000128065"}

18:33:10.908 response time in milliseconds: 749.20
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: ,Content-Type,sid,CCPToken,CFIToken,countryCode,businessCode,channelId,uuid,client_id,environmentId
1 &lt; Access-Control-Allow-Methods: GET,PUT,POST,DELETE,HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID,sid,SessionId,CCPToken,CFIToken
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: ba8e5469-70d0-4dcc-a4b5-83f77fa371a0
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Length: 210
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:11 GMT
1 &lt; Expires: -1
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:11 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 1187-5-5532763892963
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 6e68aa425f24168fc29e1f15
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,59;
1 &lt; X-Vcap-Request-Id: 0722632c-c8ee-40b9-5b24-ad530be9696d
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"14581519462457720799254058556938","status":"generated","mfaResponse":{"otpDeliveryOption":["SMS"]}}}</div>
<div class="step-row">
<div class="step-container" id="418">
<div class="step-ref passed">418</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="419">
<div class="step-ref passed">419</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="419">18:33:10.909 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "14581519462457720799254058556938",
    "mfaType": "otp",
    "mfaResponse": {
      "otpDeliveryOption": [
        "SMS"
      ]
    },
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="420">
<div class="step-ref passed">420</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def ControlflowId1 = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="421">
<div class="step-ref passed">421</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match ControlflowId1 == '#present'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="422">
<div class="step-ref passed">422</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="422">18:33:10.917 [print] 14581519462457720799254058556938</div>
<div class="step-row">
<div class="step-container" id="423">
<div class="step-ref passed">423</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********ControlFlowIdGenerated*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="423">18:33:10.920 [print] *********ControlFlowIdGenerated*********</div>
<div class="step-row">
<div class="step-container" id="424">
<div class="step-ref passed">424</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell passed">1587</div>
</div>
<div class="step-row">
<div class="step-container" id="424.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/CardAuthorizationAccessToken.feature</div>
</div>
<div class="time-cell passed">1578</div>
</div>
<div class="step-row">
<div class="step-container" id="425">
<div class="step-ref passed">425</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">13</div>
</div>
<div class="step-row">
<div class="step-container" id="425.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="426">
<div class="step-ref passed">426</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="426">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="427">
<div class="step-ref passed">427</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="428">
<div class="step-ref passed">428</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="428">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="429">
<div class="step-ref passed">429</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="430">
<div class="step-ref passed">430</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="430">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="431">
<div class="step-ref passed">431</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="432">
<div class="step-ref passed">432</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="432">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="433">
<div class="step-ref passed">433</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="434">
<div class="step-ref passed">434</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="434">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="435">
<div class="step-ref passed">435</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="436">
<div class="step-ref passed">436</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="436">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="437">
<div class="step-ref passed">437</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="437">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="438">
<div class="step-ref passed">438</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="438">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="439">
<div class="step-ref passed">439</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="439">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="440">
<div class="step-ref passed">440</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="440">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="441">
<div class="step-ref passed">441</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell passed">682</div>
</div>
<div class="step-row">
<div class="step-container" id="441.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/CardAuthorization.feature</div>
</div>
<div class="time-cell passed">677</div>
</div>
<div class="step-row">
<div class="step-container" id="442">
<div class="step-ref passed">442</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">29</div>
</div>
<div class="step-row">
<div class="step-container" id="442.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">19</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="443">
<div class="step-ref passed">443</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="443">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="444">
<div class="step-ref passed">444</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="445">
<div class="step-ref passed">445</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="445">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="446">
<div class="step-ref passed">446</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="447">
<div class="step-ref passed">447</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="447">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="448">
<div class="step-ref passed">448</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="449">
<div class="step-ref passed">449</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="449">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="450">
<div class="step-ref passed">450</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="451">
<div class="step-ref passed">451</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="451">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="452">
<div class="step-ref passed">452</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="453">
<div class="step-ref passed">453</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="453">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="454">
<div class="step-ref passed">454</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="454">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="455">
<div class="step-ref passed">455</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">9</div>
</div>
<div class="preformatted" data-parent="455">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="456">
<div class="step-ref passed">456</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="456">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="457">
<div class="step-ref passed">457</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="457">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="458">
<div class="step-ref passed">458</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def CardAuthRequest = read('classpath:Citibank/lop/CardAuthorizationRequest.json')</div>
</div>
<div class="time-cell passed">8</div>
</div>
<div class="step-row">
<div class="step-container" id="459">
<div class="step-ref passed">459</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="460">
<div class="step-ref passed">460</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="461">
<div class="step-ref passed">461</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="462">
<div class="step-ref passed">462</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="463">
<div class="step-ref passed">463</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="464">
<div class="step-ref passed">464</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="465">
<div class="step-ref passed">465</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request CardAuthRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="466">
<div class="step-ref passed">466</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">635</div>
</div>
<div class="preformatted" data-parent="466">18:33:10.994 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/authorize/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 157
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 607233133864809597-5
{"grant_type":"card_authorization","lastFourDigitsCardNumber":"8653","citiCardHolderPhoneNumber":"6590020056","merchantCustomerReferenceId":"CB072000128065"}

18:33:11.619 response time in milliseconds: 622.66
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: ,Content-Type,sid,CCPToken,CFIToken,countryCode,businessCode,channelId,uuid,client_id,environmentId
1 &lt; Access-Control-Allow-Methods: GET,PUT,POST,DELETE,HEAD
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID,sid,SessionId,CCPToken,CFIToken
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: dacd9d98-5c73-4d75-8646-d1872bac2988
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:12 GMT
1 &lt; Expires: -1
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:12 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 607233133864809597-5
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 98b6a3705f24168fea825e0f
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,58;
1 &lt; X-Vcap-Request-Id: 7f9d077e-6b32-4a5a-5fd3-0e99d8b06dcf
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"44767305013924703657177611829190","status":"generated","mfaResponse":{"otpDeliveryOption":["SMS"]}}}</div>
<div class="step-row">
<div class="step-container" id="467">
<div class="step-ref passed">467</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="468">
<div class="step-ref passed">468</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="468">18:33:11.620 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "44767305013924703657177611829190",
    "mfaType": "otp",
    "mfaResponse": {
      "otpDeliveryOption": [
        "SMS"
      ]
    },
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="469">
<div class="step-ref passed">469</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def ControlflowId1 = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="470">
<div class="step-ref passed">470</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match ControlflowId1 == '#present'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="471">
<div class="step-ref passed">471</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="471">18:33:11.621 [print] 44767305013924703657177611829190</div>
<div class="step-row">
<div class="step-container" id="472">
<div class="step-ref passed">472</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********ControlFlowIdGenerated*********'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="472">18:33:11.622 [print] *********ControlFlowIdGenerated*********</div>
<div class="step-row">
<div class="step-container" id="473">
<div class="step-ref passed">473</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/token/sg/gcb'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="474">
<div class="step-ref passed">474</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = 'Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="475">
<div class="step-ref passed">475</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/x-www-form-urlencoded'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="476">
<div class="step-ref passed">476</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="477">
<div class="step-ref passed">477</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="478">
<div class="step-ref passed">478</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="479">
<div class="step-ref passed">479</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field grant_type = 'card_authorization'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="480">
<div class="step-ref passed">480</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field controlFlowId = ControlflowId1</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="481">
<div class="step-ref passed">481</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field linkageConfirmationCode = '987654'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="482">
<div class="step-ref passed">482</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And form field scope = 'lop_booking'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="483">
<div class="step-ref passed">483</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">854</div>
</div>
<div class="preformatted" data-parent="483">18:33:11.640 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/cardAuth/oauth2/token/sg/gcb
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Basic ZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5Olk4eVAzYk43Z1MzbFEwYUMzd0UwcVkzb0M0Z1Uwa0swc0kxdUk1aEY2d0Y2cUw0a0Ez
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 125
1 &gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 3-29667249692530844-
grant_type=card_authorization&amp;controlFlowId=44767305013924703657177611829190&amp;linkageConfirmationCode=987654&amp;scope=lop_booking

18:33:12.491 response time in milliseconds: 850.33
1 &lt; 200
1 &lt; Accept: application/json
1 &lt; Access-Control-Allow-Methods: POST
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Access-Control-Expose-Headers: APIm-Debug-Trans-Id, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-Global-Transaction-ID
1 &lt; Akamai-Origin-Hop: 1
1 &lt; Cache-Control: no-cache, max-age=0
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Cookie: CITI_SITE=gtdc
1 &lt; Date: Fri, 31 Jul 2020 13:03:13 GMT
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:13 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Akamai-CONFIG-LOG-DETAIL: true
1 &lt; X-Akamai-True-Client-IP: 49.207.197.157
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-DataStream-Session-Id: 22f17934-5f241690-14905a41
1 &lt; X-Forwarded-For: 49.207.197.157
1 &lt; X-Global-Transaction-ID: 98b6a3705f241690ea836abf
1 &lt; X_AK_SHAPE_AGGREGATOR_IP: FALSE
1 &lt; cardIdHeader: 44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d
1 &lt; cardReferenceNumberHeader: 37344b5144564669667
1 &lt; citiUUID: 
1 &lt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; client_secret: Y8yP3bN7gS3lQ0aC3wE0qY3oC4gU0kK0sI1uI5hF6wF6qL4kA3
1 &lt; customerIdHeader: 6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d
1 &lt; dmz-global-txn-id: 98b6a3705f241690ea836abf
1 &lt; mfaCode: fww2dG82A7mm3nQXwB9yaZtfAmJg1k1%2BiLlhn646axJRMSJVKVdS6tEGXoaXKAkqPGiBFWD0PJi64jfHZb0NHA%3D%3D
1 &lt; uuid: 3-29667249692530844-
{"token_type":"Bearer","access_token":"AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA","expires_in":2678400,"consented_on":1596200592,"scope":"lop_booking","refresh_token":"AAJpU1zcuIlLUDV2FuYzqWvi4T6vhKK0jxPLMfGaVSkgyUuRVQ4jOxSHZdeWVRTRbHigY7TCC27cCO_nMJxdnUjsCd0Woq75oTMV10s2VGLth4TXRm-vXOHPdaKDgJcJIY_qxnb_56iNlzxp7-nalMiNtf4ODBqidTXz69KnUWWxVLsKORbSCrQnDFiyc9ZkVecKcsn7FdQjlycc8M2a_BTGHz9WOUxAtev0Zl4D4pXKrA","refresh_token_expires_in":2682000,"cardId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","customerId":"6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d","cardReferenceNumber":"37344b5144564669667"}</div>
<div class="step-row">
<div class="step-container" id="484">
<div class="step-ref passed">484</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="485">
<div class="step-ref passed">485</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="485">18:33:12.492 [print] {
  "access_token": "AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA",
  "refresh_token_expires_in": 2682000,
  "refresh_token": "AAJpU1zcuIlLUDV2FuYzqWvi4T6vhKK0jxPLMfGaVSkgyUuRVQ4jOxSHZdeWVRTRbHigY7TCC27cCO_nMJxdnUjsCd0Woq75oTMV10s2VGLth4TXRm-vXOHPdaKDgJcJIY_qxnb_56iNlzxp7-nalMiNtf4ODBqidTXz69KnUWWxVLsKORbSCrQnDFiyc9ZkVecKcsn7FdQjlycc8M2a_BTGHz9WOUxAtev0Zl4D4pXKrA",
  "scope": "lop_booking",
  "cardId": "44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d",
  "consented_on": 1596200592,
  "customerId": "6f4442616a48476f646576436c2f5a307949365a357465536f726866412f77393263316d387132506c416f3d",
  "cardReferenceNumber": "37344b5144564669667",
  "token_type": "Bearer",
  "expires_in": 2678400
}</div>
<div class="step-row">
<div class="step-container" id="486">
<div class="step-ref passed">486</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.token_type == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="487">
<div class="step-ref passed">487</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.access_token == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="488">
<div class="step-ref passed">488</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def tokenType = response.token_type</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="489">
<div class="step-ref passed">489</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def accessToken = response.access_token</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="490">
<div class="step-ref passed">490</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def access_token = tokenType+' '+accessToken</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="491">
<div class="step-ref passed">491</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="491">18:33:12.504 [print] Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA</div>
<div class="step-row">
<div class="step-container" id="492">
<div class="step-ref passed">492</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********AccessTokenGenerated*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="492">18:33:12.506 [print] *********AccessTokenGenerated*********</div>
<div class="step-row">
<div class="step-container" id="493">
<div class="step-ref passed">493</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/Loan_Eligibility.feature')</div>
</div>
<div class="time-cell passed">695</div>
</div>
<div class="step-row">
<div class="step-container" id="493.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/Loan_Eligibility.feature</div>
</div>
<div class="time-cell passed">686</div>
</div>
<div class="step-row">
<div class="step-container" id="494">
<div class="step-ref passed">494</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">16</div>
</div>
<div class="step-row">
<div class="step-container" id="494.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="495">
<div class="step-ref passed">495</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="495">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="496">
<div class="step-ref passed">496</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="497">
<div class="step-ref passed">497</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="497">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="498">
<div class="step-ref passed">498</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="499">
<div class="step-ref passed">499</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="499">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="500">
<div class="step-ref passed">500</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="501">
<div class="step-ref passed">501</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="501">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="502">
<div class="step-ref passed">502</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="503">
<div class="step-ref passed">503</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="503">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="504">
<div class="step-ref passed">504</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="505">
<div class="step-ref passed">505</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="505">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="506">
<div class="step-ref passed">506</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="506">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="507">
<div class="step-ref passed">507</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="507">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="508">
<div class="step-ref passed">508</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="508">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="509">
<div class="step-ref passed">509</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="509">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="510">
<div class="step-ref passed">510</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/eligibility'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="511">
<div class="step-ref passed">511</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="512">
<div class="step-ref passed">512</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="513">
<div class="step-ref passed">513</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="514">
<div class="step-ref passed">514</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="515">
<div class="step-ref passed">515</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">641</div>
</div>
<div class="preformatted" data-parent="515">18:33:12.536 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/eligibility
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 61-67-8310892324-116

18:33:13.175 response time in milliseconds: 638.62
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 8ccc0586-b958-4a66-9412-731f8999429e
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:13 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:13 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 61-67-8310892324-116
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f241691ea83c07f
1 &lt; X-Vcap-Request-Id: c297fdbb-6355-4563-4623-2ce48a4db6e8
1 &lt; mfaCode: 7FBkYaSBLln4v0nM%2FIFwMB0VlgkBw7aDMzxq5lfEBo3tGtpOUP9fdmz95bgglWkKwZU8cdlM9C3TG%2FVSwd%2FzfJDFOCODHtA1ux3VOD8PTNb5iD6kJpT9d1bMsNoCIEtmF0M9len6jW4JWraApVfAj4m%2FUhwbYpEy4uyqp1WegRBTR8v69jtK0KxkCHcJ7bGrjEJZ9Q7aPpR8DbKwIBbeL0drntiNnFhYLEWoJ5qmVGOxzzfB5tXA1xKhXHmi1%2FYjqh86z1CkUtug46QPmMa1p70fWf8eptfB0OzebMvdkb%2F4PC602vtdhljnMFHuLOYRZgotre%2FtDPobCRfGugomiTG6bWB92qo9TD9jjtztD%2Fnn5sUdqoWaIW3nEXtunGIo%2BdGxfjiv2VmC3eT3jA3kDfwlJLF7InHGeP3j4HUf2zs%3D
{"loanEligibilityDetails":[{"accountId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","displayAccountNumber":"4765","lopSupportedAccountGroup":"CREDIT_CARD","maximumEligibleLoanAmount":500000.0,"minimumEligibleLoanAmount":50000.0,"offerIndicator":"RATE_BASED","interestCalculationMethod":"REDUCING_BALANCE_METHOD","lopCategory":"LOAN_OVER_PHONE"}]}</div>
<div class="step-row">
<div class="step-container" id="516">
<div class="step-ref passed">516</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="517">
<div class="step-ref passed">517</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="517">18:33:13.176 [print] {
  "loanEligibilityDetails": [
    {
      "minimumEligibleLoanAmount": 50000.0,
      "accountId": "44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d",
      "interestCalculationMethod": "REDUCING_BALANCE_METHOD",
      "offerIndicator": "RATE_BASED",
      "lopSupportedAccountGroup": "CREDIT_CARD",
      "displayAccountNumber": "4765",
      "lopCategory": "LOAN_OVER_PHONE",
      "maximumEligibleLoanAmount": 500000.0
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="518">
<div class="step-ref passed">518</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].displayAccountNumber == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="519">
<div class="step-ref passed">519</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].accountId == '#present'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="520">
<div class="step-ref passed">520</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].maximumEligibleLoanAmount == 500000</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="521">
<div class="step-ref passed">521</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanEligibilityDetails[0].minimumEligibleLoanAmount == 50000</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="522">
<div class="step-ref passed">522</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def displayAccountNumber = response.loanEligibilityDetails[0].displayAccountNumber</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="523">
<div class="step-ref passed">523</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def accountId = response.loanEligibilityDetails[0].accountId</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="524">
<div class="step-ref passed">524</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def maximumEligibleLoanAmount = response.loanEligibilityDetails[0].maximumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="525">
<div class="step-ref passed">525</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def minimumEligibleLoanAmount = response.loanEligibilityDetails[0].minimumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="526">
<div class="step-ref passed">526</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print displayAccountNumber</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="526">18:33:13.199 [print] 4765</div>
<div class="step-row">
<div class="step-container" id="527">
<div class="step-ref passed">527</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print accountId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="527">18:33:13.199 [print] 44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d</div>
<div class="step-row">
<div class="step-container" id="528">
<div class="step-ref passed">528</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print maximumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="528">18:33:13.199 [print] 500000.0</div>
<div class="step-row">
<div class="step-container" id="529">
<div class="step-ref passed">529</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print minimumEligibleLoanAmount</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="529">18:33:13.200 [print] 50000.0</div>
<div class="step-row">
<div class="step-container" id="530">
<div class="step-ref passed">530</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Checked Loan Eligibility And AccountId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="530">18:33:13.202 [print] ********* Checked Loan Eligibility And AccountId Generated *********</div>
<div class="step-row">
<div class="step-container" id="531">
<div class="step-ref passed">531</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/Check_EPP_Plan.feature')</div>
</div>
<div class="time-cell passed">1228</div>
</div>
<div class="step-row">
<div class="step-container" id="531.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/Check_EPP_Plan.feature</div>
</div>
<div class="time-cell passed">1221</div>
</div>
<div class="step-row">
<div class="step-container" id="532">
<div class="step-ref passed">532</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container" id="532.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="533">
<div class="step-ref passed">533</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="533">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="534">
<div class="step-ref passed">534</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="535">
<div class="step-ref passed">535</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="535">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="536">
<div class="step-ref passed">536</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="537">
<div class="step-ref passed">537</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="537">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="538">
<div class="step-ref passed">538</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="539">
<div class="step-ref passed">539</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="539">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="540">
<div class="step-ref passed">540</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="541">
<div class="step-ref passed">541</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="541">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="542">
<div class="step-ref passed">542</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="543">
<div class="step-ref passed">543</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="543">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="544">
<div class="step-ref passed">544</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="544">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="545">
<div class="step-ref passed">545</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="545">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="546">
<div class="step-ref passed">546</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="546">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="547">
<div class="step-ref passed">547</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="547">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorization.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/CardAuthorizationAccessToken.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#* call read('classpath:Citibank/lop/Loan_Eligibility.feature')</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="548">
<div class="step-ref passed">548</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/'+accountId+'/transactions/eligibility/easyPaymentPlan?eligbleLoanAmount=50000'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="549">
<div class="step-ref passed">549</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="550">
<div class="step-ref passed">550</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container" id="551">
<div class="step-ref passed">551</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="552">
<div class="step-ref passed">552</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="553">
<div class="step-ref passed">553</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">1188</div>
</div>
<div class="preformatted" data-parent="553">18:33:13.232 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/transactions/eligibility/easyPaymentPlan?eligbleLoanAmount=50000
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 07-8---45-10-64-5874

18:33:14.418 response time in milliseconds: 1185.33
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: f15ce955-26ea-4acb-930c-46a4c359f319
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:15 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:15 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 07-8---45-10-64-5874
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241692dcefa40f
1 &lt; X-Vcap-Request-Id: 6bca03e8-2a5b-4025-5d3c-12a915e07318
1 &lt; mfaCode: 8zAvTmSWeJErUne9lyXYXfAIzv5L5KFSNWyZe042EbDQsQVL3XsuopX3Ivr1e9f%2FUsDOQBX0gV9qS05slZ%2FR051%2BViQVW4oIVor6lQabCVT6%2F5a%2B5vsm7o8jBz9b6JASM%2FXZ%2FEHMZCyXQPlMhDTscI4Vl92%2FC5u0OrMCDy4Bw06MiuK4DgDcgsZiAjEGV%2FbscMuo%2BKip75VGp3D%2FMLgqaojyGCXq1j7XiRpwwbEpfy%2FZunvK7LDSbbxGpgJi6z9Hehz8QhzCBbOlAh4BoosYbaA0uC4xl0s%2FCAfPLsnrG8RVIhuoHNWgpgGD6vAZyAMO569XnvUWnFRhAxWbvMBrnV73b7QagwcoXmwJc1x3qhHD30U3I84HDHivQpF1hiP2SyNuQBika6G9WCsyLBJizgSwU1Nm3uuBLbOwOUpiv%2Fc%3D
{"easyPaymentPlan":[{"tenor":"3","effectiveInterestRate":12.99,"annualPercentageRate":13.67,"installmentAmount":16666.67,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"6","effectiveInterestRate":25.99,"annualPercentageRate":26.67,"installmentAmount":8333.34,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"12","effectiveInterestRate":42.99,"annualPercentageRate":43.67,"installmentAmount":4166.67,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"},{"tenor":"24","effectiveInterestRate":72.99,"annualPercentageRate":73.67,"installmentAmount":2083.34,"oneTimeProcessingFeeIndicator":"FIXED_AMOUNT","oneTimeProcessingFeeAmount":15.15,"oneTimeProcessingFeePercentage":0.75,"offerIndicator":"RATE_BASED"}]}</div>
<div class="step-row">
<div class="step-container" id="554">
<div class="step-ref passed">554</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="555">
<div class="step-ref passed">555</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="555">18:33:14.419 [print] {
  "easyPaymentPlan": [
    {
      "tenor": "3",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 13.67,
      "installmentAmount": 16666.67,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 12.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "6",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 26.67,
      "installmentAmount": 8333.34,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 25.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "12",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 43.67,
      "installmentAmount": 4166.67,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 42.99,
      "oneTimeProcessingFeeAmount": 15.15
    },
    {
      "tenor": "24",
      "offerIndicator": "RATE_BASED",
      "annualPercentageRate": 73.67,
      "installmentAmount": 2083.34,
      "oneTimeProcessingFeePercentage": 0.75,
      "oneTimeProcessingFeeIndicator": "FIXED_AMOUNT",
      "effectiveInterestRate": 72.99,
      "oneTimeProcessingFeeAmount": 15.15
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="556">
<div class="step-ref passed">556</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[0].tenor == '3'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="557">
<div class="step-ref passed">557</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[1].tenor == '6'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="558">
<div class="step-ref passed">558</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[2].tenor == '12'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="559">
<div class="step-ref passed">559</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.easyPaymentPlan[3].tenor == '24'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="560">
<div class="step-ref passed">560</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked Easy payment plan using AccountId*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="560">18:33:14.430 [print] *********Checked Easy payment plan using AccountId*********</div>
<div class="step-row">
<div class="step-container" id="561">
<div class="step-ref passed">561</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/RepaymentSchedule.feature')</div>
</div>
<div class="time-cell passed">711</div>
</div>
<div class="step-row">
<div class="step-container" id="561.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/RepaymentSchedule.feature</div>
</div>
<div class="time-cell passed">700</div>
</div>
<div class="step-row">
<div class="step-container" id="562">
<div class="step-ref passed">562</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">13</div>
</div>
<div class="step-row">
<div class="step-container" id="562.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">6</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="563">
<div class="step-ref passed">563</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="563">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="564">
<div class="step-ref passed">564</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="565">
<div class="step-ref passed">565</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="565">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="566">
<div class="step-ref passed">566</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="567">
<div class="step-ref passed">567</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="567">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="568">
<div class="step-ref passed">568</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="569">
<div class="step-ref passed">569</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="569">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="570">
<div class="step-ref passed">570</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="571">
<div class="step-ref passed">571</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="571">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="572">
<div class="step-ref passed">572</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="573">
<div class="step-ref passed">573</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="573">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="574">
<div class="step-ref passed">574</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="574">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="575">
<div class="step-ref passed">575</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="575">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="576">
<div class="step-ref passed">576</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="576">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="577">
<div class="step-ref passed">577</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="577">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="578">
<div class="step-ref passed">578</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/'+accountId+'/easyPaymentPlans/repaymentSchedules?loanAmount=50000&amp;tenor=6'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="579">
<div class="step-ref passed">579</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="580">
<div class="step-ref passed">580</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="581">
<div class="step-ref passed">581</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="582">
<div class="step-ref passed">582</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="583">
<div class="step-ref passed">583</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">672</div>
</div>
<div class="preformatted" data-parent="583">18:33:14.458 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/creditCards/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/easyPaymentPlans/repaymentSchedules?loanAmount=50000&amp;tenor=6
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 7704-48-599-1-67-367

18:33:15.128 response time in milliseconds: 668.51
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 22ed5ef5-fcbb-4a4a-b500-a2d57b157172
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:15 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:15 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 7704-48-599-1-67-367
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241693dcf0cf8f
1 &lt; X-Vcap-Request-Id: 1c8ebffd-88c4-46a7-638a-391a320675b3
1 &lt; mfaCode: hkXvL2cv0t7vs8esfpkWTNwwt3fQ97HOWhg0fJXBL%2BKxu4sK4rWhIzTRNz9oJG2NV4ybnoYE6XmBPlQmAztaGlHqRYtSbTU6AT%2FsNOaaH0gbq%2BQN4OkeZU%2F58XuXW7cycoAItvcw2O%2ByXuGRbyR8tA9TrlszEOVYBxvZAON4WXG%2BYTQdmPKiTfpUo34d%2B4BVeMUsrsegWLh3JxgdueHtf5sBw3TY94uktrgCfdTExWEJOgviAFHV0SIphbO%2BsUNuCVluzSMV0gy46kNV7P9mqJXwW1wuLWMIOk0rlaBIBJNsDyUw4M3%2BVCHeSRJd9VegezCPzEhehcosunCDLbZbNbkKi4wCWT8AHpiORnpoEdPnVZOGUz8xymOI4JtyTBxqlnLXO8MhKfuVdDg5jd9rleU3GMqNuIGjIb19I8jw3bA%3D
{"eppAmortizationSchedule":[{"installmentNumber":"1","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":41666.66,"installmentDate":"07/2020"},{"installmentNumber":"2","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":33333.32,"installmentDate":"08/2020"},{"installmentNumber":"3","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":24999.98,"installmentDate":"09/2020"},{"installmentNumber":"4","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":16666.64,"installmentDate":"10/2020"},{"installmentNumber":"5","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":8333.300000000003,"installmentDate":"11/2020"},{"installmentNumber":"6","installmentAmount":8333.34,"principalAmount":8333.34,"installmentInterestAmount":"5","outstandingPrincipalAmount":-0.040000000000873115,"installmentDate":"12/2020"}],"totalLoanCost":50000.0}</div>
<div class="step-row">
<div class="step-container" id="584">
<div class="step-ref passed">584</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="585">
<div class="step-ref passed">585</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="585">18:33:15.129 [print] {
  "eppAmortizationSchedule": [
    {
      "installmentNumber": "1",
      "installmentDate": "07/2020",
      "outstandingPrincipalAmount": 41666.66,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "2",
      "installmentDate": "08/2020",
      "outstandingPrincipalAmount": 33333.32,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "3",
      "installmentDate": "09/2020",
      "outstandingPrincipalAmount": 24999.98,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "4",
      "installmentDate": "10/2020",
      "outstandingPrincipalAmount": 16666.64,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "5",
      "installmentDate": "11/2020",
      "outstandingPrincipalAmount": 8333.300000000003,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    },
    {
      "installmentNumber": "6",
      "installmentDate": "12/2020",
      "outstandingPrincipalAmount": -0.040000000000873115,
      "installmentAmount": 8333.34,
      "principalAmount": 8333.34,
      "installmentInterestAmount": "5"
    }
  ],
  "totalLoanCost": 50000.0
}</div>
<div class="step-row">
<div class="step-container" id="586">
<div class="step-ref passed">586</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[0].installmentNumber == '1'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="587">
<div class="step-ref passed">587</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[1].installmentNumber == '2'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="588">
<div class="step-ref passed">588</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[2].installmentNumber == '3'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="589">
<div class="step-ref passed">589</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[3].installmentNumber == '4'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="590">
<div class="step-ref passed">590</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[4].installmentNumber == '5'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="591">
<div class="step-ref passed">591</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.eppAmortizationSchedule[5].installmentNumber == '6'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="592">
<div class="step-ref passed">592</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked reschedule payment plan using AccountId And Tenor*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="592">18:33:15.141 [print] *********Checked reschedule payment plan using AccountId And Tenor*********</div>
<div class="step-row">
<div class="step-container" id="593">
<div class="step-ref passed">593</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/LoanBooking.feature')</div>
</div>
<div class="time-cell passed">756</div>
</div>
<div class="step-row">
<div class="step-container" id="593.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/LoanBooking.feature</div>
</div>
<div class="time-cell passed">748</div>
</div>
<div class="step-row">
<div class="step-container" id="594">
<div class="step-ref passed">594</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">8</div>
</div>
<div class="step-row">
<div class="step-container" id="594.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="595">
<div class="step-ref passed">595</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="595">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="596">
<div class="step-ref passed">596</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="597">
<div class="step-ref passed">597</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="597">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="598">
<div class="step-ref passed">598</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="599">
<div class="step-ref passed">599</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="599">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="600">
<div class="step-ref passed">600</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="601">
<div class="step-ref passed">601</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="601">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="602">
<div class="step-ref passed">602</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="603">
<div class="step-ref passed">603</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="603">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="604">
<div class="step-ref passed">604</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="605">
<div class="step-ref passed">605</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="605">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="606">
<div class="step-ref passed">606</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="606">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="607">
<div class="step-ref passed">607</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="607">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="608">
<div class="step-ref passed">608</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="608">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="609">
<div class="step-ref passed">609</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="609">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="610">
<div class="step-ref passed">610</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def loanBookingRequest = read('classpath:Citibank/lop/LoanBookingRequest.json')</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="611">
<div class="step-ref passed">611</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/bookings'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="612">
<div class="step-ref passed">612</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="613">
<div class="step-ref passed">613</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="614">
<div class="step-ref passed">614</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="615">
<div class="step-ref passed">615</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="616">
<div class="step-ref passed">616</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="617">
<div class="step-ref passed">617</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request loanBookingRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="618">
<div class="step-ref passed">618</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">727</div>
</div>
<div class="preformatted" data-parent="618">18:33:15.166 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/bookings
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 469
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 1-530197008833422-1-
{"loanAmount":60000,"disbursementOption":"PERSONAL_ACCOUNT","disbursementAccountId":"44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d","tenor":12,"bankDetails":{"bankCode":"DBSSG0XXX","bankName":"HSBC Bank","branchCode":"10034","accountNumber":"5396100020088653"},"loanPurpose":"EDUCATION_OVERSEAS","employmentStatus":"PRIVATE_EMPLOYEE","occupationCode":"BUSINESS","highestEducationLevel":"GRADUATE","paymentReferenceId":123456}

18:33:15.890 response time in milliseconds: 723.59
1 &lt; 403
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 2b9aae55-fd83-4091-87a9-fc40ab283c05
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: close
1 &lt; Content-Length: 253
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:16 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:16 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 1-530197008833422-1-
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: FAIL FAIL,FAIL FAIL,FAIL FAIL
1 &lt; X-Global-Transaction-ID: 6e68aa425f241694dcf10ebf
1 &lt; X-Vcap-Request-Id: 0075e168-16ff-44fe-4392-d750ca082acf
1 &lt; mfaCode: uwKEslFcqd7jDX7%2FSjU0qO3SizCq8YS5SECoye2%2Ba9pJxzdvPshw60Suw6j6Pu0rkExGupAJcEwVOZLRuga9GMx665P1xgYCYKM3n4FzWmpbKPYTnoCLWGn9nmglXDCfML07Gd%2Bvo0scNaPmDV53Oc2uDEVR1tQeZrswzVaFiaJXij3QZx9TTZtSWhMBe2gNKtJM47Ot0MwzKMBR0qv1hbvEpmnt1JczrR3wfUmTw6l1kTY1ZqQcUTY4vcTplhNLM8Q8URn2IQeAKUgfjAG1bvJeVeWAtqxTLSTs9MSzJy5JgoQ3%2Fho0WEnEw5nJ%2FFDUVupzt4x%2Fgq5fdjJVB5VszPgu0N6z5KrCkNvbFlQvVspfnHX0PZykJ47BsdIlNpsF3ewUjAgRm29%2BLf6mRirOUXoQ3sa20rDxqO%2FJIkZdCd8%3D
{"type":"error","code":"mfaRequired","details":"MFA is required","moreInfo":{"mfaType":"otp","controlFlowId":"EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5","status":"generated","mfaResponse":{"maskedPhoneNumber":"XXXXXXXX0056"},"otpDeliveryOption":["SMS"]}}</div>
<div class="step-row">
<div class="step-container" id="619">
<div class="step-ref passed">619</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 403</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="620">
<div class="step-ref passed">620</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="620">18:33:15.891 [print] {
  "code": "mfaRequired",
  "details": "MFA is required",
  "type": "error",
  "moreInfo": {
    "controlFlowId": "EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5",
    "mfaType": "otp",
    "mfaResponse": {
      "maskedPhoneNumber": "XXXXXXXX0056"
    },
    "otpDeliveryOption": [
      "SMS"
    ],
    "status": "generated"
  }
}</div>
<div class="step-row">
<div class="step-container" id="621">
<div class="step-ref passed">621</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.moreInfo.controlFlowId == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="622">
<div class="step-ref passed">622</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def loanBookingControlFlowId = response.moreInfo.controlFlowId</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="623">
<div class="step-ref passed">623</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print loanBookingControlFlowId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="623">18:33:15.894 [print] EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5</div>
<div class="step-row">
<div class="step-container" id="624">
<div class="step-ref passed">624</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Loan Booked And Control FlowId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="624">18:33:15.896 [print] ********* Loan Booked And Control FlowId Generated *********</div>
<div class="step-row">
<div class="step-container" id="625">
<div class="step-ref passed">625</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/DisbursmentOption.feature')</div>
</div>
<div class="time-cell passed">1195</div>
</div>
<div class="step-row">
<div class="step-container" id="625.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/DisbursmentOption.feature</div>
</div>
<div class="time-cell passed">1188</div>
</div>
<div class="step-row">
<div class="step-container" id="626">
<div class="step-ref passed">626</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container" id="626.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="627">
<div class="step-ref passed">627</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="627">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="628">
<div class="step-ref passed">628</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="629">
<div class="step-ref passed">629</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="629">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="630">
<div class="step-ref passed">630</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="631">
<div class="step-ref passed">631</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="631">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="632">
<div class="step-ref passed">632</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="633">
<div class="step-ref passed">633</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="633">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="634">
<div class="step-ref passed">634</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="635">
<div class="step-ref passed">635</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="635">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="636">
<div class="step-ref passed">636</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="637">
<div class="step-ref passed">637</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="637">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="638">
<div class="step-ref passed">638</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="638">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="639">
<div class="step-ref passed">639</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="639">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="640">
<div class="step-ref passed">640</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="640">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="641">
<div class="step-ref passed">641</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="641">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="642">
<div class="step-ref passed">642</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/disbursementOptions'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="643">
<div class="step-ref passed">643</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="644">
<div class="step-ref passed">644</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="645">
<div class="step-ref passed">645</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="646">
<div class="step-ref passed">646</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="647">
<div class="step-ref passed">647</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">1168</div>
</div>
<div class="preformatted" data-parent="647">18:33:15.918 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/disbursementOptions
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: -59099-6294--0547684

18:33:17.085 response time in milliseconds: 1166.08
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: c316fb45-21b8-45c8-aae5-fecc1d4392c5
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Length: 63
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:17 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:17 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: -59099-6294--0547684
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241695c29b0bd5
1 &lt; X-Vcap-Request-Id: a3205ebc-b379-46be-65fb-48e963d589f7
1 &lt; mfaCode: WF%2FMaMoo7GdcZ%2B3eZ9iHru%2BqBQ%2BUhZR3L3kRLlX7EKAsYv1RvH4lFQCbDBVJS3FJicxi26MFQGRS4knpsgdvCWJMiVGOwhQvTDZ%2FvHFuc%2BFXeOZktvSPed1CC%2BfKCyqZVfpfCofiUiF4gXIYqvI3stMNv8U7q6Z4Sh%2F4Lpjtw41DyPmvWdsy6nwegnUedNOnbiOFDSrTUMjZkjOHCTU%2Buur9%2Bs1ZP0AMSuKIOATXBybdyK79Z4SEdS9N9OCEuQcxu3SrZl%2BgpCFy50xwCrdmewwbB7OW5foKRxlUBSJBkS8WzSy24bc%2FjyEUEiYLpFdZ0qkfM8wQc9jwIcPzR%2Blwb8%2F83kbQSCUTUB4S7KfpkZU2W0iV2ZsbhxMqNfI3w9TkAhfajsIdHUwqHzUpvEX8sH%2FD5q%2Fa3c6nLNyTWNgNhXo%3D
{"disbursementOptions":[{"disbursementOption":"BANK_ACCOUNT"}]}</div>
<div class="step-row">
<div class="step-container" id="648">
<div class="step-ref passed">648</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="649">
<div class="step-ref passed">649</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="649">18:33:17.086 [print] {
  "disbursementOptions": [
    {
      "disbursementOption": "BANK_ACCOUNT"
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="650">
<div class="step-ref passed">650</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.disbursementOptions[0].disbursementOption == 'BANK_ACCOUNT'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="651">
<div class="step-ref passed">651</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* DisbursmentOption Details checked *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="651">18:33:17.091 [print] ********* DisbursmentOption Details checked *********</div>
<div class="step-row">
<div class="step-container" id="652">
<div class="step-ref passed">652</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/BookedLoanRepayment.feature')</div>
</div>
<div class="time-cell passed">680</div>
</div>
<div class="step-row">
<div class="step-container" id="652.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/BookedLoanRepayment.feature</div>
</div>
<div class="time-cell passed">670</div>
</div>
<div class="step-row">
<div class="step-container" id="653">
<div class="step-ref passed">653</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">13</div>
</div>
<div class="step-row">
<div class="step-container" id="653.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">7</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="654">
<div class="step-ref passed">654</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="654">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="655">
<div class="step-ref passed">655</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="656">
<div class="step-ref passed">656</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="656">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="657">
<div class="step-ref passed">657</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="658">
<div class="step-ref passed">658</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="658">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="659">
<div class="step-ref passed">659</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="660">
<div class="step-ref passed">660</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="660">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="661">
<div class="step-ref passed">661</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="662">
<div class="step-ref passed">662</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="662">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="663">
<div class="step-ref passed">663</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="664">
<div class="step-ref passed">664</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="664">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="665">
<div class="step-ref passed">665</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="665">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="666">
<div class="step-ref passed">666</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="666">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="667">
<div class="step-ref passed">667</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="667">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="668">
<div class="step-ref passed">668</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="668">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="669">
<div class="step-ref passed">669</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans/repaymentSchedules?loanAmount=60000&amp;tenor=12'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="670">
<div class="step-ref passed">670</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="671">
<div class="step-ref passed">671</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="672">
<div class="step-ref passed">672</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="673">
<div class="step-ref passed">673</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="674">
<div class="step-ref passed">674</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">635</div>
</div>
<div class="preformatted" data-parent="674">18:33:17.120 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans/repaymentSchedules?loanAmount=60000&amp;tenor=12
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: -363600956062210--11

18:33:17.751 response time in milliseconds: 630.32
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: f5b0d22b-f965-4710-9294-538ee9a0a999
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:18 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:18 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: -363600956062210--11
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f241695ea84020f
1 &lt; X-Vcap-Request-Id: 19c0bf77-2138-4d9c-77d1-fd93163b66ec
1 &lt; mfaCode: Td%2BaovFq9HQUFdgwcxyZbqlusYJ7VT2ba5OGEdHgvB8WQpizcCY7AlUJxzcDLPw18mSSf1AQko1K2VMfglI8VpVriuKWt3PznXqAYvyC9YzVURPbYwlEjbR%2BIB3hlyWxslUi%2BXRSfQiVL83iT9dmr5yDMD8U40jdv8eE45f%2BwM2AOI0T9Ot0Spx2awp%2FTxHNmGYwlULbVnhYzrlSnzuyIKqclSOZNqaJgHL%2FaJ4jyye7Wdre62fcqRASXROJ88uUlOB3yN%2BwXRDHb%2FmYHZNH0YbDu%2FVs85vgyWPoOCTnsvwLlVRAcxAR4qgM%2B4mDYz72GkUr5JMHdVFjWPK8TAo4sJ4clZF7LH%2BnSG5%2Fbo7pzUxFg8ut66kLgFj%2F8rP6DbqB4DicC6A8ELt1tcYNa4N9y%2FXJfuaCUyFyf6WFE9YFXLY%3D
{"amortizationSchedule":[{"installmentNumber":"1","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":55000.0},{"installmentNumber":"2","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":50000.0},{"installmentNumber":"3","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":45000.0},{"installmentNumber":"4","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":40000.0},{"installmentNumber":"5","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":35000.0},{"installmentNumber":"6","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":30000.0},{"installmentNumber":"7","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":25000.0},{"installmentNumber":"8","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":20000.0},{"installmentNumber":"9","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":15000.0},{"installmentNumber":"10","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":10000.0},{"installmentNumber":"11","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":5000.0},{"installmentNumber":"12","installmentAmount":5000.0,"principalAmount":5000.0,"installmentInterestAmount":5.0,"outstandingPrincipalAmount":0.0}],"totalLoanCost":60000.0}</div>
<div class="step-row">
<div class="step-container" id="675">
<div class="step-ref passed">675</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="676">
<div class="step-ref passed">676</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="676">18:33:17.752 [print] {
  "amortizationSchedule": [
    {
      "installmentNumber": "1",
      "outstandingPrincipalAmount": 55000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "2",
      "outstandingPrincipalAmount": 50000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "3",
      "outstandingPrincipalAmount": 45000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "4",
      "outstandingPrincipalAmount": 40000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "5",
      "outstandingPrincipalAmount": 35000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "6",
      "outstandingPrincipalAmount": 30000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "7",
      "outstandingPrincipalAmount": 25000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "8",
      "outstandingPrincipalAmount": 20000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "9",
      "outstandingPrincipalAmount": 15000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "10",
      "outstandingPrincipalAmount": 10000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "11",
      "outstandingPrincipalAmount": 5000.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    },
    {
      "installmentNumber": "12",
      "outstandingPrincipalAmount": 0.0,
      "installmentAmount": 5000.0,
      "principalAmount": 5000.0,
      "installmentInterestAmount": 5.0
    }
  ],
  "totalLoanCost": 60000.0
}</div>
<div class="step-row">
<div class="step-container" id="677">
<div class="step-ref passed">677</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[0].installmentNumber == '1'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="678">
<div class="step-ref passed">678</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[1].installmentNumber == '2'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="679">
<div class="step-ref passed">679</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[2].installmentNumber == '3'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="680">
<div class="step-ref passed">680</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[3].installmentNumber == '4'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="681">
<div class="step-ref passed">681</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[4].installmentNumber == '5'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="682">
<div class="step-ref passed">682</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[5].installmentNumber == '6'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="683">
<div class="step-ref passed">683</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[6].installmentNumber == '7'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="684">
<div class="step-ref passed">684</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[7].installmentNumber == '8'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="685">
<div class="step-ref passed">685</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[8].installmentNumber == '9'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="686">
<div class="step-ref passed">686</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[9].installmentNumber == '10'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="687">
<div class="step-ref passed">687</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[10].installmentNumber == '11'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="688">
<div class="step-ref passed">688</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.amortizationSchedule[11].installmentNumber == '12'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="689">
<div class="step-ref passed">689</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '*********Checked repayment Schedule plan for particular customer using AccountId And Tenor*********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="689">18:33:17.771 [print] *********Checked repayment Schedule plan for particular customer using AccountId And Tenor*********</div>
<div class="step-row">
<div class="step-container" id="690">
<div class="step-ref passed">690</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/E2E_Key.feature')</div>
</div>
<div class="time-cell passed">585</div>
</div>
<div class="step-row">
<div class="step-container" id="690.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/E2E_Key.feature</div>
</div>
<div class="time-cell passed">577</div>
</div>
<div class="step-row">
<div class="step-container" id="691">
<div class="step-ref passed">691</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">12</div>
</div>
<div class="step-row">
<div class="step-container" id="691.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="692">
<div class="step-ref passed">692</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="692">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="693">
<div class="step-ref passed">693</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="694">
<div class="step-ref passed">694</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="694">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="695">
<div class="step-ref passed">695</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="696">
<div class="step-ref passed">696</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="696">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="697">
<div class="step-ref passed">697</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="698">
<div class="step-ref passed">698</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="698">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="699">
<div class="step-ref passed">699</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="700">
<div class="step-ref passed">700</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="700">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="701">
<div class="step-ref passed">701</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="702">
<div class="step-ref passed">702</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="702">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="703">
<div class="step-ref passed">703</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="703">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="704">
<div class="step-ref passed">704</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="704">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="705">
<div class="step-ref passed">705</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="705">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="706">
<div class="step-ref passed">706</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="706">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="707">
<div class="step-ref passed">707</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/security/e2eKey'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="708">
<div class="step-ref passed">708</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="709">
<div class="step-ref passed">709</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="710">
<div class="step-ref passed">710</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="711">
<div class="step-ref passed">711</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="712">
<div class="step-ref passed">712</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">552</div>
</div>
<div class="preformatted" data-parent="712">18:33:17.795 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/security/e2eKey
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 594602685044919----5

18:33:18.346 response time in milliseconds: 549.87
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 9d714d87-e777-4438-a10b-15e9d0087f31
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:19 GMT
1 &lt; Eventid: 54d9d36e-851c-4b06-8796-1d677ddf5565
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:19 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 594602685044919----5
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f2416969c5727fd
1 &lt; X-RateLimit-Limit: name=rate-limit-1,60;
1 &lt; X-RateLimit-Remaining: name=rate-limit-1,59;
1 &lt; X-Vcap-Request-Id: 82bdb18b-4571-49c7-65e5-44eb495baf9c
1 &lt; responseTimeStamp: 2020-07-31T13:03:18:897
{"modulus":"25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517","exponent":"65537"}</div>
<div class="step-row">
<div class="step-container" id="713">
<div class="step-ref passed">713</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="714">
<div class="step-ref passed">714</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="714">18:33:18.346 [print] {
  "modulus": "25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517",
  "exponent": "65537"
}</div>
<div class="step-row">
<div class="step-container" id="715">
<div class="step-ref passed">715</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.modulus == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="716">
<div class="step-ref passed">716</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.exponent == '#string'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="717">
<div class="step-ref passed">717</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print modulus = response.modulus</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="preformatted" data-parent="717">18:33:18.352 [print] 25807395448071880783063927664374276788531724019461095264536052917600122265726029248747658160092353325359325129355167225424735918124363962381871059412349578546292866271265015090276541231944169570880649141670888497759814527528143259824041913284350061770978018169766071113460845844085108459469585158391450098526935406938429662137050064537051989490280303654447338274065759645982123006995627973064765906600650983646328270841255201378932565397694376262787081653043786607684608758916500075911562621219363246723608091519909511420957714139087992091519498817912511234942193225900995521911767829887100702768647386501006526024517</div>
<div class="step-row">
<div class="step-container" id="718">
<div class="step-ref passed">718</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print exponent = response.exponent</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="718">18:33:18.355 [print] 65537</div>
<div class="step-row">
<div class="step-container" id="719">
<div class="step-ref passed">719</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Modulus and Exponent Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="719">18:33:18.357 [print] ********* Modulus and Exponent Generated *********</div>
<div class="step-row">
<div class="step-container" id="720">
<div class="step-ref passed">720</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/ValidateOTP.feature')</div>
</div>
<div class="time-cell passed">840</div>
</div>
<div class="step-row">
<div class="step-container" id="720.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Citibank/lop/ValidateOTP.feature</div>
</div>
<div class="time-cell passed">833</div>
</div>
<div class="step-row">
<div class="step-container" id="721">
<div class="step-ref passed">721</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">10</div>
</div>
<div class="step-row">
<div class="step-container" id="721.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="722">
<div class="step-ref passed">722</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="722">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="723">
<div class="step-ref passed">723</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="724">
<div class="step-ref passed">724</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="724">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="725">
<div class="step-ref passed">725</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="726">
<div class="step-ref passed">726</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="726">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="727">
<div class="step-ref passed">727</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="728">
<div class="step-ref passed">728</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="728">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="729">
<div class="step-ref passed">729</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="730">
<div class="step-ref passed">730</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="730">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="731">
<div class="step-ref passed">731</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="732">
<div class="step-ref passed">732</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="732">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="733">
<div class="step-ref passed">733</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="733">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="734">
<div class="step-ref passed">734</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="734">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="735">
<div class="step-ref passed">735</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="735">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="736">
<div class="step-ref passed">736</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="736">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="737">
<div class="step-ref passed">737</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def otpRequest = read('classpath:Citibank/lop/OTPValidationRequest.json')</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="738">
<div class="step-ref passed">738</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/mfa/otp'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="739">
<div class="step-ref passed">739</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="740">
<div class="step-ref passed">740</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="741">
<div class="step-ref passed">741</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="742">
<div class="step-ref passed">742</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="743">
<div class="step-ref passed">743</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="744">
<div class="step-ref passed">744</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* set otpRequest.controlFlowId = loanBookingControlFlowId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="745">
<div class="step-ref passed">745</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print otpRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="745">18:33:18.381 [print] {
  "otpDeliveryOption": "SMS",
  "otpToken": "77219F78B16B130E4894E768F08567F06470F59AAC12722D943276877C30567E8E78462F03F3D2BE5679E1AC109530F1CE7F340DB5DB342AEC0C822777D3C3B3B751A7850FAE738FF8DFCB6C805650FD0FBA90FF8E8F4A16AA1A6DC74C44A39B23512336F02C70C02D5BFCF0FAEA4170F98812B3FA9D21DE8239B300A0FFF259",
  "transactionMemo": "ENROLLCARD",
  "controlFlowId": "EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5"
}</div>
<div class="step-row">
<div class="step-container" id="746">
<div class="step-ref passed">746</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request otpRequest</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="747">
<div class="step-ref passed">747</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method put</div>
</div>
<div class="time-cell passed">801</div>
</div>
<div class="preformatted" data-parent="747">18:33:18.383 request:
1 &gt; PUT https://sandbox.apihub.citi.com/gcb/api/v1/mfa/otp
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 387
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 243--38-625261-70142
{"otpDeliveryOption":"SMS","otpToken":"77219F78B16B130E4894E768F08567F06470F59AAC12722D943276877C30567E8E78462F03F3D2BE5679E1AC109530F1CE7F340DB5DB342AEC0C822777D3C3B3B751A7850FAE738FF8DFCB6C805650FD0FBA90FF8E8F4A16AA1A6DC74C44A39B23512336F02C70C02D5BFCF0FAEA4170F98812B3FA9D21DE8239B300A0FFF259","transactionMemo":"ENROLLCARD","controlFlowId":"EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5"}

18:33:19.181 response time in milliseconds: 798.52
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 566b06fd-c3ef-4f75-be92-e954309b2997
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:19 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:19 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 243--38-625261-70142
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 98b6a3705f241697ea86323f
1 &lt; X-Vcap-Request-Id: 6c6a172d-7adb-4966-7b70-8d379cb27082
1 &lt; mfaCode: O21dMMWgjy%2F2BYmrUIcbQnGuhCK7x8%2FSRibEerG57v7Z6tojA4PjoZ1NiCbhVfweaOTg2bKpAL15%2FPwk8kaE%2FBRKJrOqTKAV3KYciu44u9VmjonMI79hIg0RRMcFLlGS8IIHu%2FFX02nYlPfN%2Fhy3lILS4%2FB6iPvb7k%2BkFZl7Ka0abiSPBr2sS%2BHbq%2FeDc6y7MQYaEMYzDeNdmX1VoeUwx1l%2BH5AwtvM%2BBjyYuymDdCkeXV3N4UnzYJBEF15ZO0CQJm6CrkaCKzbaT2dQrZVgvyBarFSchTP3i6uTeaYFO0KWM3ww9Hs15rVUpglM5RqvC6M34QXXPZAB8M9IjbHZ3g5B4RSE7ZPa9abrLD4xPTEQad5M6yqO%2FmES%2FsRCvTvvsGOqhKJ0eG5lt1euzjS7DIx2jsI7lvvo1MhBI2eJDo8%3D</div>
<div class="step-row">
<div class="step-container" id="748">
<div class="step-ref passed">748</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="749">
<div class="step-ref passed">749</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Verified OTP *********'</div>
</div>
<div class="time-cell passed">15</div>
</div>
<div class="preformatted" data-parent="749">18:33:19.196 [print] ********* Verified OTP *********</div>
<div class="step-row">
<div class="step-container" id="750">
<div class="step-ref passed">750</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/bookings/confirmation'</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container" id="751">
<div class="step-ref passed">751</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="752">
<div class="step-ref passed">752</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="753">
<div class="step-ref passed">753</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="754">
<div class="step-ref passed">754</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="755">
<div class="step-ref passed">755</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Content-Type = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="756">
<div class="step-ref passed">756</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def loanBookingConfirm = read('classpath:Citibank/lop/LoanBookingConfirmation.json')</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="757">
<div class="step-ref passed">757</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* set loanBookingConfirm.controlFlowId = loanBookingControlFlowId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="758">
<div class="step-ref passed">758</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print loanBookingConfirm</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="758">18:33:19.209 [print] {
  "controlFlowId": "EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5"
}</div>
<div class="step-row">
<div class="step-container" id="759">
<div class="step-ref passed">759</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And request loanBookingConfirm</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="760">
<div class="step-ref passed">760</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method post</div>
</div>
<div class="time-cell passed">636</div>
</div>
<div class="preformatted" data-parent="760">18:33:19.211 request:
1 &gt; POST https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/bookings/confirmation
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 60
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 506-2642222-33507249
{"controlFlowId":"EBLVAnxBn1sinluC5vsPwO8vmKR3zeeLO6i8Fni5"}

18:33:19.845 response time in milliseconds: 589.50
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 0b7c5ef1-537d-4718-9720-9d0237a474c3
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Length: 42
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:20 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:20 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 506-2642222-33507249
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:2
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241698dcf1b17f
1 &lt; X-Vcap-Request-Id: cf39e92c-b1e0-41b1-4449-95ccc7c9ca72
1 &lt; mfaCode: vv3Mx5CdJpLnP0cL3PLYLvvlQIHTf6fCsZC%2BC4hnLx33a2MEkdCS9yk0D8mKdmlYWsK8qESaIC%2FKtVWjH8yuueeXUIUtFoRXfv343mapboONOL28%2F18or1%2BOtaHSIT6cnqQPAgm836sezHT4sc3xmM%2FZtPoDvmjfZJLtx5%2FoeQWZBKs9ZIw2zuBJJ7mhg6zTtLTXI7DC0nDIexvFlrC%2FTnhL3Cg9gW5zVRbU4I6RnVzX0N32O%2FWTcWa0XwYCue%2Fnd5hF5eI83pDoJC4wXsPVk0wshzenLZZ5ZRVEEWUeV5Z15P1Ceh3ZNyTlf0QmV8rJS688oW2OPqRIJNfQqSEWv7PFmxkVk9B6lv6XlpBndmZoshVnGgYHkI%2Fn0vS7W1KYVv6gxLxqQlAJQFjkguxuG%2FjuGDU3PE6MKEvm0a0PdhI%3D
{"loanReferenceId":"gmTSclRbg0N1blPl4IxH"}</div>
<div class="step-row">
<div class="step-container" id="761">
<div class="step-ref passed">761</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="762">
<div class="step-ref passed">762</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="762">18:33:19.846 [print] {
  "loanReferenceId": "gmTSclRbg0N1blPl4IxH"
}</div>
<div class="step-row">
<div class="step-container" id="763">
<div class="step-ref passed">763</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def LoanReferenceId = response.loanReferenceId</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="764">
<div class="step-ref passed">764</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loanReferenceId == '#present'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="765">
<div class="step-ref passed">765</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print LoanReferenceId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="765">18:33:19.852 [print] gmTSclRbg0N1blPl4IxH</div>
<div class="step-row">
<div class="step-container" id="766">
<div class="step-ref passed">766</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* LoanReferenceId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="766">18:33:19.854 [print] ********* LoanReferenceId Generated *********</div>
<div class="step-row">
<div class="step-container" id="767">
<div class="step-ref passed">767</div>
<div class="step-cell passed">* call read('classpath:Citibank/lop/LOPSummary.feature')</div>
</div>
<div class="time-cell passed">740</div>
</div>
<div class="step-row">
<div class="step-container" id="767.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-cell passed">Citibank/lop/LOPSummary.feature</div>
</div>
<div class="time-cell passed">731</div>
</div>
<div class="step-row">
<div class="step-container" id="768">
<div class="step-ref passed">768</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* call read('classpath:reusable.feature')</div>
</div>
<div class="time-cell passed">11</div>
</div>
<div class="step-row">
<div class="step-container" id="768.1">
<div class="step-ref passed">&gt;&gt;</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">reusable.feature</div>
</div>
<div class="time-cell passed">5</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random string will be generated. This is mainly used for the X-REQUEST-ID value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="769">
<div class="step-ref passed">769</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomString =</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="769">function(s) {
var text = "";
var possible = "1234-567-890";
for (var i = 0; i &lt; s; i++)
text += possible.charAt(Math.floor(Math.random() * possible.length));
return text;
}</div>
<div class="step-row">
<div class="step-container" id="770">
<div class="step-ref passed">770</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def requestId = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Current Time value is generated and assigned to a variable. This is used for the beneficiary value when creating a beneficiary</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="771">
<div class="step-ref passed">771</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def now =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="771">function(){ return java.lang.System.currentTimeMillis() }</div>
<div class="step-row">
<div class="step-container" id="772">
<div class="step-ref passed">772</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def currentTime = now()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random UUID value is generated and assigned to a variable. This is used for the deviceId value</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="773">
<div class="step-ref passed">773</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomUUID =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="773">function(){ return java.util.UUID.randomUUID() + '' }</div>
<div class="step-row">
<div class="step-container" id="774">
<div class="step-ref passed">774</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def uuid = randomUUID()</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#    TBC</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># * def tulipReferenceGen =</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># function(s) {</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var text = "";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   var possible = "abcdefghijklmnopqrstuv1234567890";</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   for (var i = 0; i &lt; s; i++)</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#     text += possible.charAt(Math.floor(Math.random() * possible.length));</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#   return text;</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># }</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment"># """</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="775">
<div class="step-ref passed">775</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def getDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="775">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="776">
<div class="step-ref passed">776</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SimpleDateFormatDate = getDate()</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="777">
<div class="step-ref passed">777</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def jsessionIDSplit =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="777">function(list)
{
 var session=list.split(" ", 14);
 return session
}</div>
<div class="step-row">
<div class="step-container" id="778">
<div class="step-ref passed">778</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def sleep = function(millis){ java.lang.Thread.sleep(millis) }</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="779">
<div class="step-ref passed">779</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def internatiocnalDateFormat =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="779">function() {
  var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
  var sdf = new SimpleDateFormat("yyyy-MM-dd");
  var date = new java.util.Date();
  return sdf.format(date);
}</div>
<div class="step-row">
<div class="step-container" id="780">
<div class="step-ref passed">780</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def yesterday =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="780">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var yesterday = currentDate.setDate(currentDate.getDate() - 1);
    return sdf.format(yesterday)
}</div>
<div class="step-row">
<div class="step-container" id="781">
<div class="step-ref passed">781</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def futureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="781">function() {
    var currentDate = new Date();
    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
    var sdf = new SimpleDateFormat("yyyy-MM-dd");
    var futureDate = currentDate.setDate(currentDate.getDate() + 1);
    return sdf.format(futureDate)
}</div>
<div class="step-row">
<div class="step-container">
<div class="step-ref passed"></div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell comment">#Random future date generation</div>
</div>
<div class="time-cell comment"></div>
</div>
<div class="step-row">
<div class="step-container" id="782">
<div class="step-ref passed">782</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def randomFutureDate =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="782">function() {
var today = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var futureDate = new Date();
var randomNumber = Math.floor( Math.random()*(7-1))+1
var futuredate=futureDate.setDate(today.getDate()+randomNumber)
if(futureDate.getDay() === 0 || futureDate.getDay() === 6){
 futuredate = futureDate.setDate(futureDate.getDate()+2) }
return sdf.format(futuredate)
}</div>
<div class="step-row">
<div class="step-container" id="783">
<div class="step-ref passed">783</div>
<div class="step-indent"> 
</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def weekEnd =</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="783">function()
{
var weekend = new Date();
var SimpleDateFormat = Java.type('java.text.SimpleDateFormat')
var sdf = new SimpleDateFormat("yyyy-MM-dd");
var differnece = 7-weekend.getDay();
result = sdf.format(weekend.setDate(weekend.getDate()+differnece))
return result
}</div>
<div class="step-row">
<div class="step-container" id="784">
<div class="step-ref passed">784</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/'+accountId+'/loans'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="step-row">
<div class="step-container" id="785">
<div class="step-ref passed">785</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="786">
<div class="step-ref passed">786</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="787">
<div class="step-ref passed">787</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="788">
<div class="step-ref passed">788</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="789">
<div class="step-ref passed">789</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">709</div>
</div>
<div class="preformatted" data-parent="789">18:33:19.880 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/44125873852316f2b4d4d796c344e38756339654972776f663745446e6d4c32486f455a4165374a476858343d/loans
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 1415--5-270-7-932--5

18:33:20.585 response time in milliseconds: 701.62
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: ae6d9f0d-203b-4a1e-ac05-c25b5644bb6d
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:21 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:21 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 1415--5-270-7-932--5
1 &lt; Vary: Accept-Encoding
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:1
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241698dcf2958f
1 &lt; X-Vcap-Request-Id: 5d517d54-f457-4515-46ff-8ac0b7f49eba
1 &lt; mfaCode: SY7ZQRiXqCq4A1xRukhT5oxH2DZ69%2BmDiWljoOEFsU6HzSprAiFJ69CiCP%2Bx2frZL57I4h2vDLM4mHKvgKmCwmcIVBRHMr1dLDVK7JOtHblqvPfusUPDyFU8rMw7a0esjeNQ7quKJ2L%2BO5OwHCvhJCXY6HwDWMjwRctLZMYBixxqH4iRgkZFEC%2B%2FppAbPZAsFcXmy7%2FnjXGuQfjvNc1bNAJji2cOOpPwRKgFpnGMWkfJAB5QPJCH%2FQHnjcmd4ZeXsRzWRnvcx4DfIXR9u3cTopYnWJ%2FpDWLsvOCLmPpiCgzAcsG4fbKzfbJpb%2Bv19%2B4mPfFXkbM9sZhlY%2ByiCB8FojxcrbDWcTO3elGr0LOyzRaTc3hw8hZ1zKwb1z5o1KbIevwIxatOsGH53y%2B878jwVPaIW8oqE4VPvmkFhKm48UQ%3D
{"loans":[{"loanReferenceId":"xNLgEEWcsxUiUUU26pSB","displayAccountNumber":"5396100020088653","transactionDate":"2019-01-01","transactionDescription":"Transaction for loan ref id xNLgEEWcsxUiUUU26pSB","installmentAmount":44.66,"nextInstallmentAmount":144.66,"outstandingBalanceAmount":100.0,"tenor":3,"outstandingTenor":2,"originalLoanAmount":80000.0,"annualPercentageRate":13.67,"effectiveInterestRate":12.99,"processingChargeAmount":15.15,"outstandingInterestAmount":15.56,"installmentCycle":4},{"loanReferenceId":"V7e8ygZzCFshjDcrH56w","displayAccountNumber":"5396100020088653","transactionDate":"2019-01-01","transactionDescription":"Transaction for loan ref id V7e8ygZzCFshjDcrH56w","installmentAmount":44.66,"nextInstallmentAmount":144.66,"outstandingBalanceAmount":100.0,"tenor":6,"outstandingTenor":5,"originalLoanAmount":80000.0,"annualPercentageRate":26.67,"effectiveInterestRate":25.99,"processingChargeAmount":15.15,"outstandingInterestAmount":15.56,"installmentCycle":4},{"loanReferenceId":"27ACPd4Z4zLiFudMmYi6","displayAccountNumber":"5396100020088653","transactionDate":"2019-01-01","transactionDescription":"Transaction for loan ref id 27ACPd4Z4zLiFudMmYi6","installmentAmount":44.66,"nextInstallmentAmount":144.66,"outstandingBalanceAmount":100.0,"tenor":12,"outstandingTenor":11,"originalLoanAmount":80000.0,"annualPercentageRate":43.67,"effectiveInterestRate":42.99,"processingChargeAmount":15.15,"outstandingInterestAmount":15.56,"installmentCycle":4},{"loanReferenceId":"bQDi5O2ekT87gPGJFaHg","displayAccountNumber":"5396100020088653","transactionDate":"2019-01-01","transactionDescription":"Transaction for loan ref id bQDi5O2ekT87gPGJFaHg","installmentAmount":1500.0,"nextInstallmentAmount":1600.0,"outstandingBalanceAmount":100.0,"tenor":24,"outstandingTenor":23,"originalLoanAmount":80000.0,"annualPercentageRate":73.67,"effectiveInterestRate":72.99,"processingChargeAmount":15.15,"outstandingInterestAmount":15.56,"installmentCycle":4}]}</div>
<div class="step-row">
<div class="step-container" id="790">
<div class="step-ref passed">790</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="791">
<div class="step-ref passed">791</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="preformatted" data-parent="791">18:33:20.587 [print] {
  "loans": [
    {
      "installmentAmount": 44.66,
      "annualPercentageRate": 13.67,
      "outstandingInterestAmount": 15.56,
      "processingChargeAmount": 15.15,
      "installmentCycle": 4,
      "transactionDescription": "Transaction for loan ref id xNLgEEWcsxUiUUU26pSB",
      "outstandingTenor": 2,
      "transactionDate": "2019-01-01",
      "originalLoanAmount": 80000.0,
      "tenor": 3,
      "outstandingBalanceAmount": 100.0,
      "displayAccountNumber": "5396100020088653",
      "nextInstallmentAmount": 144.66,
      "loanReferenceId": "xNLgEEWcsxUiUUU26pSB",
      "effectiveInterestRate": 12.99
    },
    {
      "installmentAmount": 44.66,
      "annualPercentageRate": 26.67,
      "outstandingInterestAmount": 15.56,
      "processingChargeAmount": 15.15,
      "installmentCycle": 4,
      "transactionDescription": "Transaction for loan ref id V7e8ygZzCFshjDcrH56w",
      "outstandingTenor": 5,
      "transactionDate": "2019-01-01",
      "originalLoanAmount": 80000.0,
      "tenor": 6,
      "outstandingBalanceAmount": 100.0,
      "displayAccountNumber": "5396100020088653",
      "nextInstallmentAmount": 144.66,
      "loanReferenceId": "V7e8ygZzCFshjDcrH56w",
      "effectiveInterestRate": 25.99
    },
    {
      "installmentAmount": 44.66,
      "annualPercentageRate": 43.67,
      "outstandingInterestAmount": 15.56,
      "processingChargeAmount": 15.15,
      "installmentCycle": 4,
      "transactionDescription": "Transaction for loan ref id 27ACPd4Z4zLiFudMmYi6",
      "outstandingTenor": 11,
      "transactionDate": "2019-01-01",
      "originalLoanAmount": 80000.0,
      "tenor": 12,
      "outstandingBalanceAmount": 100.0,
      "displayAccountNumber": "5396100020088653",
      "nextInstallmentAmount": 144.66,
      "loanReferenceId": "27ACPd4Z4zLiFudMmYi6",
      "effectiveInterestRate": 42.99
    },
    {
      "installmentAmount": 1500.0,
      "annualPercentageRate": 73.67,
      "outstandingInterestAmount": 15.56,
      "processingChargeAmount": 15.15,
      "installmentCycle": 4,
      "transactionDescription": "Transaction for loan ref id bQDi5O2ekT87gPGJFaHg",
      "outstandingTenor": 23,
      "transactionDate": "2019-01-01",
      "originalLoanAmount": 80000.0,
      "tenor": 24,
      "outstandingBalanceAmount": 100.0,
      "displayAccountNumber": "5396100020088653",
      "nextInstallmentAmount": 1600.0,
      "loanReferenceId": "bQDi5O2ekT87gPGJFaHg",
      "effectiveInterestRate": 72.99
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="792">
<div class="step-ref passed">792</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* match response.loans[0].loanReferenceId == '#present'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="793">
<div class="step-ref passed">793</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* def SumLoanReferenceId = response.loans[0].loanReferenceId</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="794">
<div class="step-ref passed">794</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print SumLoanReferenceId</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="794">18:33:20.592 [print] xNLgEEWcsxUiUUU26pSB</div>
<div class="step-row">
<div class="step-container" id="795">
<div class="step-ref passed">795</div>
<div class="step-indent"> 
</div>
<div class="step-cell passed">* print '********* Summary LoanReferenceId Generated *********'</div>
</div>
<div class="time-cell passed">2</div>
</div>
<div class="preformatted" data-parent="795">18:33:20.594 [print] ********* Summary LoanReferenceId Generated *********</div>
<div class="step-row">
<div class="step-container" id="796">
<div class="step-ref passed">796</div>
<div class="step-cell passed">Given url 'https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/'+SumLoanReferenceId+'/repaymentSchedules'</div>
</div>
<div class="time-cell passed">4</div>
</div>
<div class="step-row">
<div class="step-container" id="797">
<div class="step-ref passed">797</div>
<div class="step-cell passed">And header Authorization = access_token</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="798">
<div class="step-ref passed">798</div>
<div class="step-cell passed">And header uuid = randomString(20)</div>
</div>
<div class="time-cell passed">1</div>
</div>
<div class="step-row">
<div class="step-container" id="799">
<div class="step-ref passed">799</div>
<div class="step-cell passed">And header Accept = 'application/json'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="800">
<div class="step-ref passed">800</div>
<div class="step-cell passed">And header client_id = 'f2f08c14-8e53-4b13-862c-bdf182d46df9'</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="801">
<div class="step-ref passed">801</div>
<div class="step-cell passed">When method get</div>
</div>
<div class="time-cell passed">645</div>
</div>
<div class="preformatted" data-parent="801">18:33:20.601 request:
1 &gt; GET https://sandbox.apihub.citi.com/gcb/api/v1/accounts/loans/xNLgEEWcsxUiUUU26pSB/repaymentSchedules
1 &gt; Accept: application/json
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer AAIkZjJmMDhjMTQtOGU1My00YjEzLTg2MmMtYmRmMTgyZDQ2ZGY5HkD-Vxe1aefl3OpEK6Bj92ZHo8JaPty8w7706YvIKIrP-j6DmInMeRCRJ2pSv1R-ZeUW7wTbfRNtYeJMkhlA_5AGs6J9uxNn7_FnECeGm-mxWR6DxaCL_7lQhdY3gC0W8p2f-D1NacjSSeVDYQ6UjJvct2j-DdkWQAwHpca5X9DuMd0yFdSDfWr8pIJCsg0ZwA9gwwp5YZqR66wcABFBLA
1 &gt; Connection: Keep-Alive
1 &gt; Cookie: CITI_SITE=gtdc
1 &gt; Host: sandbox.apihub.citi.com
1 &gt; User-Agent: Apache-HttpClient/4.5.12 (Java/1.8.0_251)
1 &gt; client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &gt; uuid: 23607-716734-0460879

18:33:21.244 response time in milliseconds: 642.45
1 &lt; 200
1 &lt; Access-Control-Allow-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE
1 &lt; Access-Control-Allow-Origin: 
1 &lt; Access-Control-Expose-Headers: Accept, Accept-Language, Authorization, businessCode, client_id, content-type, countryCode, ChannelId,partnerIdentifier,PartnerCustomerID,CitiCustomerRefId, uuid, x-ibm-client-id,eventid,bizToken,citiuuid,mfaCode,channelindicator,org,relationshipnumber,terminalid,userid,messageid,versionnbr,nextStartIndex,clientDetails,x-fapi-customer-ip-address,x-fapi-customer-last-logged-time,x-fapi-financial-id,accept-compression,x-fapi-interaction-id,customerReferenceId,x-customer-user-agent,x-jws-signature,x-idempotency-key
1 &lt; Access-Control-Max-Age: 2147483647
1 &lt; Cache-Control: no-cache, no-store
1 &lt; Citiuuid: 6c26e000-f5ba-486e-9be4-ebfb2c5d5c02
1 &lt; Client_id: f2f08c14-8e53-4b13-862c-bdf182d46df9
1 &lt; Connection: keep-alive
1 &lt; Content-Length: 138
1 &lt; Content-Type: application/json
1 &lt; Date: Fri, 31 Jul 2020 13:03:21 GMT
1 &lt; Expires: -1
1 &lt; I-Cif: 025056868
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: CITI_SITE=gtdc; expires=Fri, 31-Jul-2020 13:23:21 GMT; path=/; domain=sandbox.apihub.citi.com; secure; HttpOnly
1 &lt; Uuid: 23607-716734-0460879
1 &lt; X-Akamai-CITISITE: GTDC
1 &lt; X-Application-Context: PSG-SANDBOX:utility,unsecured,stateless,service,pcr,onboard,mutualfund,moneymovementpayee,linkage,insurance,hktv,customer,cardauth,card,banking,account,ids,approuting,override,uat1,sandbox,cloud:0
1 &lt; X-Backside-Transport: OK OK,OK OK,OK OK
1 &lt; X-Global-Transaction-ID: 6e68aa425f241699c29e74d5
1 &lt; X-Vcap-Request-Id: ac9db358-99a3-410d-6122-1ed9936d0321
1 &lt; mfaCode: CHhkthUYNoQUNRyqeWMnJEBxso2J%2F6Eg6WtlwiNPLTZQUF54DB%2FYh7gCfabFjh%2Fk%2FAEZiFFt72DmNPTzlObhQSB4PVjQUouFBS0rIPzk01b4RBCp0s8xROpHySNm54q1%2Bt4a4b6nEVH5%2FTJ3qyQEPkR01sP1ntlyNY%2Bcs1nP6xnGvn0F3BxViTiXk5Sgl2FBDl0YmhblNnXVIy1zKxUuIJSNbl49LF3hWekq2bpAmV1kYfWVC2M2T8ikYwBOu0XSJgYPneM2XbWTvx6hG7SVsr8GvNxPNK7Nh8OHkZn8LWBjX%2F%2BpDKBsByGjIa0ImE9NC3ooo%2BZV%2BYquYIhTHpJslNqgfChfLMbKTDEKst7qC59xC8EdiHMBS%2BogWp7tz2hVjnZpWNZ2YruiC601g7RXz5DxuvC8Clp6NN0%2B6zicFdc%3D
{"amortizationSchedule":[{"installmentNumber":"1","installmentAmount":44.66,"principalAmount":80000.0,"installmentInterestAmount":12.99}]}</div>
<div class="step-row">
<div class="step-container" id="802">
<div class="step-ref passed">802</div>
<div class="step-cell passed">Then status 200</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="step-row">
<div class="step-container" id="803">
<div class="step-ref passed">803</div>
<div class="step-cell passed">* print response</div>
</div>
<div class="time-cell passed">0</div>
</div>
<div class="preformatted" data-parent="803">18:33:21.245 [print] {
  "amortizationSchedule": [
    {
      "installmentNumber": "1",
      "installmentAmount": 44.66,
      "principalAmount": 80000.0,
      "installmentInterestAmount": 12.99
    }
  ]
}</div>
<div class="step-row">
<div class="step-container" id="804">
<div class="step-ref passed">804</div>
<div class="step-cell passed">* match response.amortizationSchedule[0].installmentNumber == '1'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="step-row">
<div class="step-container" id="805">
<div class="step-ref passed">805</div>
<div class="step-cell passed">* print '********* Upcomming Payments details Generated *********'</div>
</div>
<div class="time-cell passed">3</div>
</div>
<div class="preformatted" data-parent="805">18:33:21.250 [print] ********* Upcomming Payments details Generated *********</div>
</div>
</div>
    
</div>   
  
</body>

</html>
